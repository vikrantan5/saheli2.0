{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"]}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"]}},{"name":"./ExpoLocation","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":42,"index":42}}],"key":"n9eQB3huKj/lRnIsgaXRKPJKjaY=","exportNames":["*"]}},{"name":"./LocationEventEmitter","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":43},"end":{"line":2,"column":62,"index":105}}],"key":"38XLRnQdDBx35ZID4eB8duhAnLg=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.LocationSubscriber = exports.LocationErrorSubscriber = exports.HeadingSubscriber = void 0;\n  exports._getCurrentWatchId = _getCurrentWatchId;\n  var _classCallCheck2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\"));\n  var _createClass2 = _interopRequireDefault(require(_dependencyMap[2], \"@babel/runtime/helpers/createClass\"));\n  var _ExpoLocation = _interopRequireDefault(require(_dependencyMap[3], \"./ExpoLocation\"));\n  var _LocationEventEmitter = require(_dependencyMap[4], \"./LocationEventEmitter\");\n  var nextWatchId = 0;\n  var Subscriber = /*#__PURE__*/function () {\n    function Subscriber(eventName, eventDataField) {\n      (0, _classCallCheck2.default)(this, Subscriber);\n      this.callbacks = {};\n      this.eventSubscription = null;\n      this.eventName = eventName;\n      this.eventDataField = eventDataField;\n    }\n    return (0, _createClass2.default)(Subscriber, [{\n      key: \"maybeInitializeSubscription\",\n      value: function maybeInitializeSubscription() {\n        if (this.eventSubscription) {\n          return;\n        }\n        this.eventSubscription = _LocationEventEmitter.LocationEventEmitter.addListener(this.eventName, event => this.trigger(event));\n      }\n      /**\n       * Registers given callback under new id which is then returned.\n       */\n    }, {\n      key: \"registerCallback\",\n      value: function registerCallback(callback) {\n        this.maybeInitializeSubscription();\n        var id = ++nextWatchId;\n        this.callbacks[id] = callback;\n        return id;\n      }\n      /**\n       * Registers given callback under and existing id. This can be used to\n       * create a subscriber for the error event on the same id as the location\n       * event is subscribed to.\n       */\n    }, {\n      key: \"registerCallbackForId\",\n      value: function registerCallbackForId(watchId, callback) {\n        this.maybeInitializeSubscription();\n        var id = watchId;\n        this.callbacks[id] = callback;\n        return id;\n      }\n      /**\n       * Unregisters a callback with given id and revokes the subscription if possible.\n       */\n    }, {\n      key: \"unregisterCallback\",\n      value: function unregisterCallback(id) {\n        // Do nothing if we have already unregistered the callback.\n        if (!this.callbacks[id]) {\n          return;\n        }\n        delete this.callbacks[id];\n        _ExpoLocation.default.removeWatchAsync(id);\n        if (Object.keys(this.callbacks).length === 0 && this.eventSubscription) {\n          _LocationEventEmitter.LocationEventEmitter.removeSubscription(this.eventSubscription);\n          this.eventSubscription = null;\n        }\n      }\n    }, {\n      key: \"trigger\",\n      value: function trigger(event) {\n        var watchId = event.watchId;\n        var callback = this.callbacks[watchId];\n        if (callback) {\n          callback(event[this.eventDataField]);\n        } else {\n          _ExpoLocation.default.removeWatchAsync(watchId);\n        }\n      }\n    }]);\n  }();\n  var LocationSubscriber = exports.LocationSubscriber = new Subscriber('Expo.locationChanged', 'location');\n  var HeadingSubscriber = exports.HeadingSubscriber = new Subscriber('Expo.headingChanged', 'heading');\n  var LocationErrorSubscriber = exports.LocationErrorSubscriber = new Subscriber('Expo.locationError', 'reason');\n  /**\n   * @private Necessary for some unit tests.\n   */\n  function _getCurrentWatchId() {\n    return nextWatchId;\n  }\n});","lineCount":92,"map":[[10,2,1,0],[10,6,1,0,"_ExpoLocation"],[10,19,1,0],[10,22,1,0,"_interopRequireDefault"],[10,44,1,0],[10,45,1,0,"require"],[10,52,1,0],[10,53,1,0,"_dependencyMap"],[10,67,1,0],[11,2,2,0],[11,6,2,0,"_LocationEventEmitter"],[11,27,2,0],[11,30,2,0,"require"],[11,37,2,0],[11,38,2,0,"_dependencyMap"],[11,52,2,0],[12,2,3,0],[12,6,3,4,"nextWatchId"],[12,17,3,15],[12,20,3,18],[12,21,3,19],[13,2,3,20],[13,6,4,6,"Subscriber"],[13,16,4,16],[14,4,9,4],[14,13,9,4,"Subscriber"],[14,24,9,16,"eventName"],[14,33,9,25],[14,35,9,27,"eventDataField"],[14,49,9,41],[14,51,9,43],[15,6,9,43],[15,10,9,43,"_classCallCheck2"],[15,26,9,43],[15,27,9,43,"default"],[15,34,9,43],[15,42,9,43,"Subscriber"],[15,52,9,43],[16,6,9,43],[16,11,7,4,"callbacks"],[16,20,7,13],[16,23,7,16],[16,24,7,17],[16,25,7,18],[17,6,7,18],[17,11,8,4,"eventSubscription"],[17,28,8,21],[17,31,8,24],[17,35,8,28],[18,6,10,8],[18,10,10,12],[18,11,10,13,"eventName"],[18,20,10,22],[18,23,10,25,"eventName"],[18,32,10,34],[19,6,11,8],[19,10,11,12],[19,11,11,13,"eventDataField"],[19,25,11,27],[19,28,11,30,"eventDataField"],[19,42,11,44],[20,4,12,4],[21,4,12,5],[21,15,12,5,"_createClass2"],[21,28,12,5],[21,29,12,5,"default"],[21,36,12,5],[21,38,12,5,"Subscriber"],[21,48,12,5],[22,6,12,5,"key"],[22,9,12,5],[23,6,12,5,"value"],[23,11,12,5],[23,13,13,4],[23,22,13,4,"maybeInitializeSubscription"],[23,49,13,31,"maybeInitializeSubscription"],[23,50,13,31],[23,52,13,34],[24,8,14,8],[24,12,14,12],[24,16,14,16],[24,17,14,17,"eventSubscription"],[24,34,14,34],[24,36,14,36],[25,10,15,12],[26,8,16,8],[27,8,17,8],[27,12,17,12],[27,13,17,13,"eventSubscription"],[27,30,17,30],[27,33,17,33,"LocationEventEmitter"],[27,75,17,53],[27,76,17,54,"addListener"],[27,87,17,65],[27,88,17,66],[27,92,17,70],[27,93,17,71,"eventName"],[27,102,17,80],[27,104,17,83,"event"],[27,109,17,88],[27,113,17,93],[27,117,17,97],[27,118,17,98,"trigger"],[27,125,17,105],[27,126,17,106,"event"],[27,131,17,111],[27,132,17,112],[27,133,17,113],[28,6,18,4],[29,6,19,4],[30,0,20,0],[31,0,21,0],[32,4,19,4],[33,6,19,4,"key"],[33,9,19,4],[34,6,19,4,"value"],[34,11,19,4],[34,13,22,4],[34,22,22,4,"registerCallback"],[34,38,22,20,"registerCallback"],[34,39,22,21,"callback"],[34,47,22,29],[34,49,22,31],[35,8,23,8],[35,12,23,12],[35,13,23,13,"maybeInitializeSubscription"],[35,40,23,40],[35,41,23,41],[35,42,23,42],[36,8,24,8],[36,12,24,14,"id"],[36,14,24,16],[36,17,24,19],[36,19,24,21,"nextWatchId"],[36,30,24,32],[37,8,25,8],[37,12,25,12],[37,13,25,13,"callbacks"],[37,22,25,22],[37,23,25,23,"id"],[37,25,25,25],[37,26,25,26],[37,29,25,29,"callback"],[37,37,25,37],[38,8,26,8],[38,15,26,15,"id"],[38,17,26,17],[39,6,27,4],[40,6,28,4],[41,0,29,0],[42,0,30,0],[43,0,31,0],[44,0,32,0],[45,4,28,4],[46,6,28,4,"key"],[46,9,28,4],[47,6,28,4,"value"],[47,11,28,4],[47,13,33,4],[47,22,33,4,"registerCallbackForId"],[47,43,33,25,"registerCallbackForId"],[47,44,33,26,"watchId"],[47,51,33,33],[47,53,33,35,"callback"],[47,61,33,43],[47,63,33,45],[48,8,34,8],[48,12,34,12],[48,13,34,13,"maybeInitializeSubscription"],[48,40,34,40],[48,41,34,41],[48,42,34,42],[49,8,35,8],[49,12,35,14,"id"],[49,14,35,16],[49,17,35,19,"watchId"],[49,24,35,26],[50,8,36,8],[50,12,36,12],[50,13,36,13,"callbacks"],[50,22,36,22],[50,23,36,23,"id"],[50,25,36,25],[50,26,36,26],[50,29,36,29,"callback"],[50,37,36,37],[51,8,37,8],[51,15,37,15,"id"],[51,17,37,17],[52,6,38,4],[53,6,39,4],[54,0,40,0],[55,0,41,0],[56,4,39,4],[57,6,39,4,"key"],[57,9,39,4],[58,6,39,4,"value"],[58,11,39,4],[58,13,42,4],[58,22,42,4,"unregisterCallback"],[58,40,42,22,"unregisterCallback"],[58,41,42,23,"id"],[58,43,42,25],[58,45,42,27],[59,8,43,8],[60,8,44,8],[60,12,44,12],[60,13,44,13],[60,17,44,17],[60,18,44,18,"callbacks"],[60,27,44,27],[60,28,44,28,"id"],[60,30,44,30],[60,31,44,31],[60,33,44,33],[61,10,45,12],[62,8,46,8],[63,8,47,8],[63,15,47,15],[63,19,47,19],[63,20,47,20,"callbacks"],[63,29,47,29],[63,30,47,30,"id"],[63,32,47,32],[63,33,47,33],[64,8,48,8,"ExpoLocation"],[64,29,48,20],[64,30,48,21,"removeWatchAsync"],[64,46,48,37],[64,47,48,38,"id"],[64,49,48,40],[64,50,48,41],[65,8,49,8],[65,12,49,12,"Object"],[65,18,49,18],[65,19,49,19,"keys"],[65,23,49,23],[65,24,49,24],[65,28,49,28],[65,29,49,29,"callbacks"],[65,38,49,38],[65,39,49,39],[65,40,49,40,"length"],[65,46,49,46],[65,51,49,51],[65,52,49,52],[65,56,49,56],[65,60,49,60],[65,61,49,61,"eventSubscription"],[65,78,49,78],[65,80,49,80],[66,10,50,12,"LocationEventEmitter"],[66,52,50,32],[66,53,50,33,"removeSubscription"],[66,71,50,51],[66,72,50,52],[66,76,50,56],[66,77,50,57,"eventSubscription"],[66,94,50,74],[66,95,50,75],[67,10,51,12],[67,14,51,16],[67,15,51,17,"eventSubscription"],[67,32,51,34],[67,35,51,37],[67,39,51,41],[68,8,52,8],[69,6,53,4],[70,4,53,5],[71,6,53,5,"key"],[71,9,53,5],[72,6,53,5,"value"],[72,11,53,5],[72,13,54,4],[72,22,54,4,"trigger"],[72,29,54,11,"trigger"],[72,30,54,12,"event"],[72,35,54,17],[72,37,54,19],[73,8,55,8],[73,12,55,14,"watchId"],[73,19,55,21],[73,22,55,24,"event"],[73,27,55,29],[73,28,55,30,"watchId"],[73,35,55,37],[74,8,56,8],[74,12,56,14,"callback"],[74,20,56,22],[74,23,56,25],[74,27,56,29],[74,28,56,30,"callbacks"],[74,37,56,39],[74,38,56,40,"watchId"],[74,45,56,47],[74,46,56,48],[75,8,57,8],[75,12,57,12,"callback"],[75,20,57,20],[75,22,57,22],[76,10,58,12,"callback"],[76,18,58,20],[76,19,58,21,"event"],[76,24,58,26],[76,25,58,27],[76,29,58,31],[76,30,58,32,"eventDataField"],[76,44,58,46],[76,45,58,47],[76,46,58,48],[77,8,59,8],[77,9,59,9],[77,15,60,13],[78,10,61,12,"ExpoLocation"],[78,31,61,24],[78,32,61,25,"removeWatchAsync"],[78,48,61,41],[78,49,61,42,"watchId"],[78,56,61,49],[78,57,61,50],[79,8,62,8],[80,6,63,4],[81,4,63,5],[82,2,63,5],[83,2,65,7],[83,6,65,13,"LocationSubscriber"],[83,24,65,31],[83,27,65,31,"exports"],[83,34,65,31],[83,35,65,31,"LocationSubscriber"],[83,53,65,31],[83,56,65,34],[83,60,65,38,"Subscriber"],[83,70,65,48],[83,71,65,49],[83,93,65,71],[83,95,65,73],[83,105,65,83],[83,106,65,84],[84,2,66,7],[84,6,66,13,"HeadingSubscriber"],[84,23,66,30],[84,26,66,30,"exports"],[84,33,66,30],[84,34,66,30,"HeadingSubscriber"],[84,51,66,30],[84,54,66,33],[84,58,66,37,"Subscriber"],[84,68,66,47],[84,69,66,48],[84,90,66,69],[84,92,66,71],[84,101,66,80],[84,102,66,81],[85,2,67,7],[85,6,67,13,"LocationErrorSubscriber"],[85,29,67,36],[85,32,67,36,"exports"],[85,39,67,36],[85,40,67,36,"LocationErrorSubscriber"],[85,63,67,36],[85,66,67,39],[85,70,67,43,"Subscriber"],[85,80,67,53],[85,81,67,54],[85,101,67,74],[85,103,67,76],[85,111,67,84],[85,112,67,85],[86,2,68,0],[87,0,69,0],[88,0,70,0],[89,2,71,7],[89,11,71,16,"_getCurrentWatchId"],[89,29,71,34,"_getCurrentWatchId"],[89,30,71,34],[89,32,71,37],[90,4,72,4],[90,11,72,11,"nextWatchId"],[90,22,72,22],[91,2,73,0],[92,0,73,1],[92,3]],"functionMap":{"names":["<global>","Subscriber","Subscriber#constructor","Subscriber#maybeInitializeSubscription","LocationEventEmitter.addListener$argument_1","Subscriber#registerCallback","Subscriber#registerCallbackForId","Subscriber#unregisterCallback","Subscriber#trigger","_getCurrentWatchId"],"mappings":"AAA;ACG;ICK;KDG;IEC;kFCI,8BD;KFC;III;KJK;IKM;KLK;IMI;KNW;IOC;KPS;CDC;OSO;CTE"}},"type":"js/module"}]}