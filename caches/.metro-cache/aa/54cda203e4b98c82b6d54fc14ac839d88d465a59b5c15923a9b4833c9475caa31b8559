{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":99,"index":99}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"]}},{"name":"./injection","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":158},"end":{"line":4,"column":67,"index":225}}],"key":"Ri12V5UvvLPFQrEealibULxq4mg=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useDOMImperativeHandle = useDOMImperativeHandle;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _injection = require(_dependencyMap[1], \"./injection\");\n  /**\n   * A React `useImperativeHandle` like hook for DOM components.\n   *\n   */\n  function useDOMImperativeHandle(ref, init, deps) {\n    const isTargetWeb =\n    // @ts-expect-error: Added via react-native-webview\n    typeof window.ReactNativeWebView === 'undefined' &&\n    // @ts-expect-error: Added via expo/dom\n    typeof window.$$EXPO_INITIAL_PROPS === 'undefined';\n    const stubHandlerFactory = (0, _react.useCallback)(() => ({}), deps ?? []);\n\n    // This standard useImperativeHandle hook is serving for web\n    (0, _react.useImperativeHandle)(ref, isTargetWeb ? init : stubHandlerFactory, deps);\n\n    // This `globalThis._domRefProxy` is serving for native\n    (0, _react.useEffect)(() => {\n      if (!isTargetWeb) {\n        globalThis._domRefProxy = init();\n        // TODO(@kitten): Type `ReactNativeWebView` and the message data\n        // @ts-expect-error: Added via react-native-webview\n        window.ReactNativeWebView.postMessage(JSON.stringify({\n          type: _injection.REGISTER_DOM_IMPERATIVE_HANDLE_PROPS,\n          data: Object.keys(globalThis._domRefProxy)\n        }));\n      }\n      return () => {\n        if (!isTargetWeb) {\n          globalThis._domRefProxy = undefined;\n        }\n      };\n    }, deps);\n  }\n});","lineCount":41,"map":[[6,2,1,0],[6,6,1,0,"_react"],[6,12,1,0],[6,15,1,0,"require"],[6,22,1,0],[6,23,1,0,"_dependencyMap"],[6,37,1,0],[7,2,4,0],[7,6,4,0,"_injection"],[7,16,4,0],[7,19,4,0,"require"],[7,26,4,0],[7,27,4,0,"_dependencyMap"],[7,41,4,0],[8,2,10,0],[9,0,11,0],[10,0,12,0],[11,0,13,0],[12,2,14,7],[12,11,14,16,"useDOMImperativeHandle"],[12,33,14,38,"useDOMImperativeHandle"],[12,34,15,2,"ref"],[12,37,15,13],[12,39,16,2,"init"],[12,43,16,15],[12,45,17,2,"deps"],[12,49,17,23],[12,51,18,2],[13,4,19,2],[13,10,19,8,"isTargetWeb"],[13,21,19,19],[14,4,20,4],[15,4,21,4],[15,11,21,11,"window"],[15,17,21,17],[15,18,21,18,"ReactNativeWebView"],[15,36,21,36],[15,41,21,41],[15,52,21,52],[16,4,22,4],[17,4,23,4],[17,11,23,11,"window"],[17,17,23,17],[17,18,23,18,"$$EXPO_INITIAL_PROPS"],[17,38,23,38],[17,43,23,43],[17,54,23,54],[18,4,25,2],[18,10,25,8,"stubHandlerFactory"],[18,28,25,26],[18,31,25,29],[18,35,25,29,"useCallback"],[18,53,25,40],[18,55,25,41],[18,62,25,48],[18,63,25,49],[18,64,25,50],[18,65,25,56],[18,67,25,58,"deps"],[18,71,25,62],[18,75,25,66],[18,77,25,68],[18,78,25,69],[20,4,27,2],[21,4,28,2],[21,8,28,2,"useImperativeHandle"],[21,34,28,21],[21,36,28,22,"ref"],[21,39,28,25],[21,41,28,27,"isTargetWeb"],[21,52,28,38],[21,55,28,41,"init"],[21,59,28,45],[21,62,28,48,"stubHandlerFactory"],[21,80,28,66],[21,82,28,68,"deps"],[21,86,28,72],[21,87,28,73],[23,4,30,2],[24,4,31,2],[24,8,31,2,"useEffect"],[24,24,31,11],[24,26,31,12],[24,32,31,18],[25,6,32,4],[25,10,32,8],[25,11,32,9,"isTargetWeb"],[25,22,32,20],[25,24,32,22],[26,8,33,6,"globalThis"],[26,18,33,16],[26,19,33,17,"_domRefProxy"],[26,31,33,29],[26,34,33,32,"init"],[26,38,33,36],[26,39,33,37],[26,40,33,38],[27,8,34,6],[28,8,35,6],[29,8,36,6,"window"],[29,14,36,12],[29,15,36,13,"ReactNativeWebView"],[29,33,36,31],[29,34,36,32,"postMessage"],[29,45,36,43],[29,46,37,8,"JSON"],[29,50,37,12],[29,51,37,13,"stringify"],[29,60,37,22],[29,61,37,23],[30,10,38,10,"type"],[30,14,38,14],[30,16,38,16,"REGISTER_DOM_IMPERATIVE_HANDLE_PROPS"],[30,63,38,52],[31,10,39,10,"data"],[31,14,39,14],[31,16,39,16,"Object"],[31,22,39,22],[31,23,39,23,"keys"],[31,27,39,27],[31,28,39,28,"globalThis"],[31,38,39,38],[31,39,39,39,"_domRefProxy"],[31,51,39,58],[32,8,40,8],[32,9,40,9],[32,10,41,6],[32,11,41,7],[33,6,42,4],[34,6,43,4],[34,13,43,11],[34,19,43,17],[35,8,44,6],[35,12,44,10],[35,13,44,11,"isTargetWeb"],[35,24,44,22],[35,26,44,24],[36,10,45,8,"globalThis"],[36,20,45,18],[36,21,45,19,"_domRefProxy"],[36,33,45,31],[36,36,45,34,"undefined"],[36,45,45,43],[37,8,46,6],[38,6,47,4],[38,7,47,5],[39,4,48,2],[39,5,48,3],[39,7,48,5,"deps"],[39,11,48,9],[39,12,48,10],[40,2,49,0],[41,0,49,1],[41,3]],"functionMap":{"names":["<global>","useDOMImperativeHandle","stubHandlerFactory","useEffect$argument_0","<anonymous>"],"mappings":"AAA;OCa;yCCW,eD;YEM;WCY;KDI;GFC;CDC"}},"type":"js/module"}]}