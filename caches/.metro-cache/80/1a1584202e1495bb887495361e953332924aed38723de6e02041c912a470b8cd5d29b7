{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"tslib","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":8},"end":{"line":2,"column":34,"index":42}}],"key":"8R25577gwLd3n1hFG9VYnRLV9eE=","exportNames":["*"]}},{"name":"../lib/errors","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":43},"end":{"line":3,"column":47,"index":90}}],"key":"tudpaQjH3OjVUtpmjZhVLT9U2eg=","exportNames":["*"]}},{"name":"./StreamDownloadBuilder","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":91},"end":{"line":4,"column":60,"index":151}}],"key":"8Ubul3M21knXuSFidv57RlVYJmI=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n  var _tslib = require(_dependencyMap[1], \"tslib\");\n  var _errors = require(_dependencyMap[2], \"../lib/errors\");\n  var _StreamDownloadBuilder = _interopRequireDefault(require(_dependencyMap[3], \"./StreamDownloadBuilder\"));\n  var _a;\n  class BlobDownloadBuilder {\n    constructor(downloadFn, shouldThrowOnError) {\n      this.downloadFn = downloadFn;\n      this.shouldThrowOnError = shouldThrowOnError;\n      this[_a] = 'BlobDownloadBuilder';\n      this.promise = null;\n    }\n    asStream() {\n      return new _StreamDownloadBuilder.default(this.downloadFn, this.shouldThrowOnError);\n    }\n    then(onfulfilled, onrejected) {\n      return this.getPromise().then(onfulfilled, onrejected);\n    }\n    catch(onrejected) {\n      return this.getPromise().catch(onrejected);\n    }\n    finally(onfinally) {\n      return this.getPromise().finally(onfinally);\n    }\n    getPromise() {\n      if (!this.promise) {\n        this.promise = this.execute();\n      }\n      return this.promise;\n    }\n    execute() {\n      return (0, _tslib.__awaiter)(this, void 0, void 0, function* () {\n        try {\n          const result = yield this.downloadFn();\n          return {\n            data: yield result.blob(),\n            error: null\n          };\n        } catch (error) {\n          if (this.shouldThrowOnError) {\n            throw error;\n          }\n          if ((0, _errors.isStorageError)(error)) {\n            return {\n              data: null,\n              error\n            };\n          }\n          throw error;\n        }\n      });\n    }\n  }\n  _a = Symbol.toStringTag;\n  var _default = exports.default = BlobDownloadBuilder;\n});","lineCount":61,"map":[[7,2,2,0],[7,6,2,0,"_tslib"],[7,12,2,0],[7,15,2,0,"require"],[7,22,2,0],[7,23,2,0,"_dependencyMap"],[7,37,2,0],[8,2,3,0],[8,6,3,0,"_errors"],[8,13,3,0],[8,16,3,0,"require"],[8,23,3,0],[8,24,3,0,"_dependencyMap"],[8,38,3,0],[9,2,4,0],[9,6,4,0,"_StreamDownloadBuilder"],[9,28,4,0],[9,31,4,0,"_interopRequireDefault"],[9,53,4,0],[9,54,4,0,"require"],[9,61,4,0],[9,62,4,0,"_dependencyMap"],[9,76,4,0],[10,2,1,0],[10,6,1,4,"_a"],[10,8,1,6],[11,2,5,0],[11,8,5,6,"BlobDownloadBuilder"],[11,27,5,25],[11,28,5,26],[12,4,6,4,"constructor"],[12,15,6,15,"constructor"],[12,16,6,16,"downloadFn"],[12,26,6,26],[12,28,6,28,"shouldThrowOnError"],[12,46,6,46],[12,48,6,48],[13,6,7,8],[13,10,7,12],[13,11,7,13,"downloadFn"],[13,21,7,23],[13,24,7,26,"downloadFn"],[13,34,7,36],[14,6,8,8],[14,10,8,12],[14,11,8,13,"shouldThrowOnError"],[14,29,8,31],[14,32,8,34,"shouldThrowOnError"],[14,50,8,52],[15,6,9,8],[15,10,9,12],[15,11,9,13,"_a"],[15,13,9,15],[15,14,9,16],[15,17,9,19],[15,38,9,40],[16,6,10,8],[16,10,10,12],[16,11,10,13,"promise"],[16,18,10,20],[16,21,10,23],[16,25,10,27],[17,4,11,4],[18,4,12,4,"asStream"],[18,12,12,12,"asStream"],[18,13,12,12],[18,15,12,15],[19,6,13,8],[19,13,13,15],[19,17,13,19,"StreamDownloadBuilder"],[19,47,13,40],[19,48,13,41],[19,52,13,45],[19,53,13,46,"downloadFn"],[19,63,13,56],[19,65,13,58],[19,69,13,62],[19,70,13,63,"shouldThrowOnError"],[19,88,13,81],[19,89,13,82],[20,4,14,4],[21,4,15,4,"then"],[21,8,15,8,"then"],[21,9,15,9,"onfulfilled"],[21,20,15,20],[21,22,15,22,"onrejected"],[21,32,15,32],[21,34,15,34],[22,6,16,8],[22,13,16,15],[22,17,16,19],[22,18,16,20,"getPromise"],[22,28,16,30],[22,29,16,31],[22,30,16,32],[22,31,16,33,"then"],[22,35,16,37],[22,36,16,38,"onfulfilled"],[22,47,16,49],[22,49,16,51,"onrejected"],[22,59,16,61],[22,60,16,62],[23,4,17,4],[24,4,18,4,"catch"],[24,9,18,9,"catch"],[24,10,18,10,"onrejected"],[24,20,18,20],[24,22,18,22],[25,6,19,8],[25,13,19,15],[25,17,19,19],[25,18,19,20,"getPromise"],[25,28,19,30],[25,29,19,31],[25,30,19,32],[25,31,19,33,"catch"],[25,36,19,38],[25,37,19,39,"onrejected"],[25,47,19,49],[25,48,19,50],[26,4,20,4],[27,4,21,4,"finally"],[27,11,21,11,"finally"],[27,12,21,12,"onfinally"],[27,21,21,21],[27,23,21,23],[28,6,22,8],[28,13,22,15],[28,17,22,19],[28,18,22,20,"getPromise"],[28,28,22,30],[28,29,22,31],[28,30,22,32],[28,31,22,33,"finally"],[28,38,22,40],[28,39,22,41,"onfinally"],[28,48,22,50],[28,49,22,51],[29,4,23,4],[30,4,24,4,"getPromise"],[30,14,24,14,"getPromise"],[30,15,24,14],[30,17,24,17],[31,6,25,8],[31,10,25,12],[31,11,25,13],[31,15,25,17],[31,16,25,18,"promise"],[31,23,25,25],[31,25,25,27],[32,8,26,12],[32,12,26,16],[32,13,26,17,"promise"],[32,20,26,24],[32,23,26,27],[32,27,26,31],[32,28,26,32,"execute"],[32,35,26,39],[32,36,26,40],[32,37,26,41],[33,6,27,8],[34,6,28,8],[34,13,28,15],[34,17,28,19],[34,18,28,20,"promise"],[34,25,28,27],[35,4,29,4],[36,4,30,4,"execute"],[36,11,30,11,"execute"],[36,12,30,11],[36,14,30,14],[37,6,31,8],[37,13,31,15],[37,17,31,15,"__awaiter"],[37,33,31,24],[37,35,31,25],[37,39,31,29],[37,41,31,31],[37,46,31,36],[37,47,31,37],[37,49,31,39],[37,54,31,44],[37,55,31,45],[37,57,31,47],[37,70,31,60],[38,8,32,12],[38,12,32,16],[39,10,33,16],[39,16,33,22,"result"],[39,22,33,28],[39,25,33,31],[39,31,33,37],[39,35,33,41],[39,36,33,42,"downloadFn"],[39,46,33,52],[39,47,33,53],[39,48,33,54],[40,10,34,16],[40,17,34,23],[41,12,35,20,"data"],[41,16,35,24],[41,18,35,26],[41,24,35,32,"result"],[41,30,35,38],[41,31,35,39,"blob"],[41,35,35,43],[41,36,35,44],[41,37,35,45],[42,12,36,20,"error"],[42,17,36,25],[42,19,36,27],[43,10,37,16],[43,11,37,17],[44,8,38,12],[44,9,38,13],[44,10,39,12],[44,17,39,19,"error"],[44,22,39,24],[44,24,39,26],[45,10,40,16],[45,14,40,20],[45,18,40,24],[45,19,40,25,"shouldThrowOnError"],[45,37,40,43],[45,39,40,45],[46,12,41,20],[46,18,41,26,"error"],[46,23,41,31],[47,10,42,16],[48,10,43,16],[48,14,43,20],[48,18,43,20,"isStorageError"],[48,40,43,34],[48,42,43,35,"error"],[48,47,43,40],[48,48,43,41],[48,50,43,43],[49,12,44,20],[49,19,44,27],[50,14,44,29,"data"],[50,18,44,33],[50,20,44,35],[50,24,44,39],[51,14,44,41,"error"],[52,12,44,47],[52,13,44,48],[53,10,45,16],[54,10,46,16],[54,16,46,22,"error"],[54,21,46,27],[55,8,47,12],[56,6,48,8],[56,7,48,9],[56,8,48,10],[57,4,49,4],[58,2,50,0],[59,2,51,0,"_a"],[59,4,51,2],[59,7,51,5,"Symbol"],[59,13,51,11],[59,14,51,12,"toStringTag"],[59,25,51,23],[60,2,51,24],[60,6,51,24,"_default"],[60,14,51,24],[60,17,51,24,"exports"],[60,24,51,24],[60,25,51,24,"default"],[60,32,51,24],[60,35,52,15,"BlobDownloadBuilder"],[60,54,52,34],[61,0,52,34],[61,3]],"functionMap":{"names":["<global>","BlobDownloadBuilder","constructor","asStream","then","_catch","_finally","getPromise","execute","__awaiter$argument_3"],"mappings":"AAA;ACI;ICC;KDK;IEC;KFE;IGC;KHE;IIC;KJE;IKC;KLE;IMC;KNK;IOC;+CCC;SDiB;KPC;CDC"}},"type":"js/module"}]}