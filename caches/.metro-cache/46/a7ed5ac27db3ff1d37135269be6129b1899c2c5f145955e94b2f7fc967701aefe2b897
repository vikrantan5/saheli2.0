{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = exports.WebSocketFactory = void 0;\n  class WebSocketFactory {\n    static detectEnvironment() {\n      var _a;\n      if (typeof WebSocket !== 'undefined') {\n        return {\n          type: 'native',\n          constructor: WebSocket\n        };\n      }\n      if (typeof globalThis !== 'undefined' && typeof globalThis.WebSocket !== 'undefined') {\n        return {\n          type: 'native',\n          constructor: globalThis.WebSocket\n        };\n      }\n      if (typeof global !== 'undefined' && typeof global.WebSocket !== 'undefined') {\n        return {\n          type: 'native',\n          constructor: global.WebSocket\n        };\n      }\n      if (typeof globalThis !== 'undefined' && typeof globalThis.WebSocketPair !== 'undefined' && typeof globalThis.WebSocket === 'undefined') {\n        return {\n          type: 'cloudflare',\n          error: 'Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.',\n          workaround: 'Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime.'\n        };\n      }\n      if (typeof globalThis !== 'undefined' && globalThis.EdgeRuntime || typeof navigator !== 'undefined' && ((_a = navigator.userAgent) === null || _a === void 0 ? void 0 : _a.includes('Vercel-Edge'))) {\n        return {\n          type: 'unsupported',\n          error: 'Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.',\n          workaround: 'Use serverless functions or a different deployment target for WebSocket functionality.'\n        };\n      }\n      if (typeof process !== 'undefined') {\n        // Use dynamic property access to avoid Next.js Edge Runtime static analysis warnings\n        const processVersions = process['versions'];\n        if (processVersions && processVersions['node']) {\n          // Remove 'v' prefix if present and parse the major version\n          const versionString = processVersions['node'];\n          const nodeVersion = parseInt(versionString.replace(/^v/, '').split('.')[0]);\n          // Node.js 22+ should have native WebSocket\n          if (nodeVersion >= 22) {\n            // Check if native WebSocket is available (should be in Node.js 22+)\n            if (typeof globalThis.WebSocket !== 'undefined') {\n              return {\n                type: 'native',\n                constructor: globalThis.WebSocket\n              };\n            }\n            // If not available, user needs to provide it\n            return {\n              type: 'unsupported',\n              error: `Node.js ${nodeVersion} detected but native WebSocket not found.`,\n              workaround: 'Provide a WebSocket implementation via the transport option.'\n            };\n          }\n          // Node.js < 22 doesn't have native WebSocket\n          return {\n            type: 'unsupported',\n            error: `Node.js ${nodeVersion} detected without native WebSocket support.`,\n            workaround: 'For Node.js < 22, install \"ws\" package and provide it via the transport option:\\n' + 'import ws from \"ws\"\\n' + 'new RealtimeClient(url, { transport: ws })'\n          };\n        }\n      }\n      return {\n        type: 'unsupported',\n        error: 'Unknown JavaScript runtime without WebSocket support.',\n        workaround: \"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation.\"\n      };\n    }\n    static getWebSocketConstructor() {\n      const env = this.detectEnvironment();\n      if (env.constructor) {\n        return env.constructor;\n      }\n      let errorMessage = env.error || 'WebSocket not supported in this environment.';\n      if (env.workaround) {\n        errorMessage += `\\n\\nSuggested solution: ${env.workaround}`;\n      }\n      throw new Error(errorMessage);\n    }\n    static createWebSocket(url, protocols) {\n      const WS = this.getWebSocketConstructor();\n      return new WS(url, protocols);\n    }\n    static isWebSocketSupported() {\n      try {\n        const env = this.detectEnvironment();\n        return env.type === 'native' || env.type === 'ws';\n      } catch (_a) {\n        return false;\n      }\n    }\n  }\n  exports.WebSocketFactory = WebSocketFactory;\n  var _default = exports.default = WebSocketFactory;\n});","lineCount":104,"map":[[6,2,1,7],[6,8,1,13,"WebSocketFactory"],[6,24,1,29],[6,25,1,30],[7,4,2,4],[7,11,2,11,"detectEnvironment"],[7,28,2,28,"detectEnvironment"],[7,29,2,28],[7,31,2,31],[8,6,3,8],[8,10,3,12,"_a"],[8,12,3,14],[9,6,4,8],[9,10,4,12],[9,17,4,19,"WebSocket"],[9,26,4,28],[9,31,4,33],[9,42,4,44],[9,44,4,46],[10,8,5,12],[10,15,5,19],[11,10,5,21,"type"],[11,14,5,25],[11,16,5,27],[11,24,5,35],[12,10,5,37,"constructor"],[12,21,5,48],[12,23,5,50,"WebSocket"],[13,8,5,60],[13,9,5,61],[14,6,6,8],[15,6,7,8],[15,10,7,12],[15,17,7,19,"globalThis"],[15,27,7,29],[15,32,7,34],[15,43,7,45],[15,47,7,49],[15,54,7,56,"globalThis"],[15,64,7,66],[15,65,7,67,"WebSocket"],[15,74,7,76],[15,79,7,81],[15,90,7,92],[15,92,7,94],[16,8,8,12],[16,15,8,19],[17,10,8,21,"type"],[17,14,8,25],[17,16,8,27],[17,24,8,35],[18,10,8,37,"constructor"],[18,21,8,48],[18,23,8,50,"globalThis"],[18,33,8,60],[18,34,8,61,"WebSocket"],[19,8,8,71],[19,9,8,72],[20,6,9,8],[21,6,10,8],[21,10,10,12],[21,17,10,19,"global"],[21,23,10,25],[21,28,10,30],[21,39,10,41],[21,43,10,45],[21,50,10,52,"global"],[21,56,10,58],[21,57,10,59,"WebSocket"],[21,66,10,68],[21,71,10,73],[21,82,10,84],[21,84,10,86],[22,8,11,12],[22,15,11,19],[23,10,11,21,"type"],[23,14,11,25],[23,16,11,27],[23,24,11,35],[24,10,11,37,"constructor"],[24,21,11,48],[24,23,11,50,"global"],[24,29,11,56],[24,30,11,57,"WebSocket"],[25,8,11,67],[25,9,11,68],[26,6,12,8],[27,6,13,8],[27,10,13,12],[27,17,13,19,"globalThis"],[27,27,13,29],[27,32,13,34],[27,43,13,45],[27,47,14,12],[27,54,14,19,"globalThis"],[27,64,14,29],[27,65,14,30,"WebSocketPair"],[27,78,14,43],[27,83,14,48],[27,94,14,59],[27,98,15,12],[27,105,15,19,"globalThis"],[27,115,15,29],[27,116,15,30,"WebSocket"],[27,125,15,39],[27,130,15,44],[27,141,15,55],[27,143,15,57],[28,8,16,12],[28,15,16,19],[29,10,17,16,"type"],[29,14,17,20],[29,16,17,22],[29,28,17,34],[30,10,18,16,"error"],[30,15,18,21],[30,17,18,23],[30,106,18,112],[31,10,19,16,"workaround"],[31,20,19,26],[31,22,19,28],[32,8,20,12],[32,9,20,13],[33,6,21,8],[34,6,22,8],[34,10,22,13],[34,17,22,20,"globalThis"],[34,27,22,30],[34,32,22,35],[34,43,22,46],[34,47,22,50,"globalThis"],[34,57,22,60],[34,58,22,61,"EdgeRuntime"],[34,69,22,72],[34,73,23,13],[34,80,23,20,"navigator"],[34,89,23,29],[34,94,23,34],[34,105,23,45],[34,110,23,50],[34,111,23,51,"_a"],[34,113,23,53],[34,116,23,56,"navigator"],[34,125,23,65],[34,126,23,66,"userAgent"],[34,135,23,75],[34,141,23,81],[34,145,23,85],[34,149,23,89,"_a"],[34,151,23,91],[34,156,23,96],[34,161,23,101],[34,162,23,102],[34,165,23,105],[34,170,23,110],[34,171,23,111],[34,174,23,114,"_a"],[34,176,23,116],[34,177,23,117,"includes"],[34,185,23,125],[34,186,23,126],[34,199,23,139],[34,200,23,140],[34,201,23,142],[34,203,23,144],[35,8,24,12],[35,15,24,19],[36,10,25,16,"type"],[36,14,25,20],[36,16,25,22],[36,29,25,35],[37,10,26,16,"error"],[37,15,26,21],[37,17,26,23],[37,116,26,122],[38,10,27,16,"workaround"],[38,20,27,26],[38,22,27,28],[39,8,28,12],[39,9,28,13],[40,6,29,8],[41,6,30,8],[41,10,30,12],[41,17,30,19,"process"],[41,24,30,26],[41,29,30,31],[41,40,30,42],[41,42,30,44],[42,8,31,12],[43,8,32,12],[43,14,32,18,"processVersions"],[43,29,32,33],[43,32,32,36,"process"],[43,39,32,43],[43,40,32,44],[43,50,32,54],[43,51,32,55],[44,8,33,12],[44,12,33,16,"processVersions"],[44,27,33,31],[44,31,33,35,"processVersions"],[44,46,33,50],[44,47,33,51],[44,53,33,57],[44,54,33,58],[44,56,33,60],[45,10,34,16],[46,10,35,16],[46,16,35,22,"versionString"],[46,29,35,35],[46,32,35,38,"processVersions"],[46,47,35,53],[46,48,35,54],[46,54,35,60],[46,55,35,61],[47,10,36,16],[47,16,36,22,"nodeVersion"],[47,27,36,33],[47,30,36,36,"parseInt"],[47,38,36,44],[47,39,36,45,"versionString"],[47,52,36,58],[47,53,36,59,"replace"],[47,60,36,66],[47,61,36,67],[47,65,36,71],[47,67,36,73],[47,69,36,75],[47,70,36,76],[47,71,36,77,"split"],[47,76,36,82],[47,77,36,83],[47,80,36,86],[47,81,36,87],[47,82,36,88],[47,83,36,89],[47,84,36,90],[47,85,36,91],[48,10,37,16],[49,10,38,16],[49,14,38,20,"nodeVersion"],[49,25,38,31],[49,29,38,35],[49,31,38,37],[49,33,38,39],[50,12,39,20],[51,12,40,20],[51,16,40,24],[51,23,40,31,"globalThis"],[51,33,40,41],[51,34,40,42,"WebSocket"],[51,43,40,51],[51,48,40,56],[51,59,40,67],[51,61,40,69],[52,14,41,24],[52,21,41,31],[53,16,41,33,"type"],[53,20,41,37],[53,22,41,39],[53,30,41,47],[54,16,41,49,"constructor"],[54,27,41,60],[54,29,41,62,"globalThis"],[54,39,41,72],[54,40,41,73,"WebSocket"],[55,14,41,83],[55,15,41,84],[56,12,42,20],[57,12,43,20],[58,12,44,20],[58,19,44,27],[59,14,45,24,"type"],[59,18,45,28],[59,20,45,30],[59,33,45,43],[60,14,46,24,"error"],[60,19,46,29],[60,21,46,31],[60,32,46,42,"nodeVersion"],[60,43,46,53],[60,86,46,96],[61,14,47,24,"workaround"],[61,24,47,34],[61,26,47,36],[62,12,48,20],[62,13,48,21],[63,10,49,16],[64,10,50,16],[65,10,51,16],[65,17,51,23],[66,12,52,20,"type"],[66,16,52,24],[66,18,52,26],[66,31,52,39],[67,12,53,20,"error"],[67,17,53,25],[67,19,53,27],[67,30,53,38,"nodeVersion"],[67,41,53,49],[67,86,53,94],[68,12,54,20,"workaround"],[68,22,54,30],[68,24,54,32],[68,107,54,115],[68,110,55,24],[68,133,55,47],[68,136,56,24],[69,10,57,16],[69,11,57,17],[70,8,58,12],[71,6,59,8],[72,6,60,8],[72,13,60,15],[73,8,61,12,"type"],[73,12,61,16],[73,14,61,18],[73,27,61,31],[74,8,62,12,"error"],[74,13,62,17],[74,15,62,19],[74,70,62,74],[75,8,63,12,"workaround"],[75,18,63,22],[75,20,63,24],[76,6,64,8],[76,7,64,9],[77,4,65,4],[78,4,66,4],[78,11,66,11,"getWebSocketConstructor"],[78,34,66,34,"getWebSocketConstructor"],[78,35,66,34],[78,37,66,37],[79,6,67,8],[79,12,67,14,"env"],[79,15,67,17],[79,18,67,20],[79,22,67,24],[79,23,67,25,"detectEnvironment"],[79,40,67,42],[79,41,67,43],[79,42,67,44],[80,6,68,8],[80,10,68,12,"env"],[80,13,68,15],[80,14,68,16,"constructor"],[80,25,68,27],[80,27,68,29],[81,8,69,12],[81,15,69,19,"env"],[81,18,69,22],[81,19,69,23,"constructor"],[81,30,69,34],[82,6,70,8],[83,6,71,8],[83,10,71,12,"errorMessage"],[83,22,71,24],[83,25,71,27,"env"],[83,28,71,30],[83,29,71,31,"error"],[83,34,71,36],[83,38,71,40],[83,84,71,86],[84,6,72,8],[84,10,72,12,"env"],[84,13,72,15],[84,14,72,16,"workaround"],[84,24,72,26],[84,26,72,28],[85,8,73,12,"errorMessage"],[85,20,73,24],[85,24,73,28],[85,51,73,55,"env"],[85,54,73,58],[85,55,73,59,"workaround"],[85,65,73,69],[85,67,73,71],[86,6,74,8],[87,6,75,8],[87,12,75,14],[87,16,75,18,"Error"],[87,21,75,23],[87,22,75,24,"errorMessage"],[87,34,75,36],[87,35,75,37],[88,4,76,4],[89,4,77,4],[89,11,77,11,"createWebSocket"],[89,26,77,26,"createWebSocket"],[89,27,77,27,"url"],[89,30,77,30],[89,32,77,32,"protocols"],[89,41,77,41],[89,43,77,43],[90,6,78,8],[90,12,78,14,"WS"],[90,14,78,16],[90,17,78,19],[90,21,78,23],[90,22,78,24,"getWebSocketConstructor"],[90,45,78,47],[90,46,78,48],[90,47,78,49],[91,6,79,8],[91,13,79,15],[91,17,79,19,"WS"],[91,19,79,21],[91,20,79,22,"url"],[91,23,79,25],[91,25,79,27,"protocols"],[91,34,79,36],[91,35,79,37],[92,4,80,4],[93,4,81,4],[93,11,81,11,"isWebSocketSupported"],[93,31,81,31,"isWebSocketSupported"],[93,32,81,31],[93,34,81,34],[94,6,82,8],[94,10,82,12],[95,8,83,12],[95,14,83,18,"env"],[95,17,83,21],[95,20,83,24],[95,24,83,28],[95,25,83,29,"detectEnvironment"],[95,42,83,46],[95,43,83,47],[95,44,83,48],[96,8,84,12],[96,15,84,19,"env"],[96,18,84,22],[96,19,84,23,"type"],[96,23,84,27],[96,28,84,32],[96,36,84,40],[96,40,84,44,"env"],[96,43,84,47],[96,44,84,48,"type"],[96,48,84,52],[96,53,84,57],[96,57,84,61],[97,6,85,8],[97,7,85,9],[97,8,86,8],[97,15,86,15,"_a"],[97,17,86,17],[97,19,86,19],[98,8,87,12],[98,15,87,19],[98,20,87,24],[99,6,88,8],[100,4,89,4],[101,2,90,0],[102,2,90,1,"exports"],[102,9,90,1],[102,10,90,1,"WebSocketFactory"],[102,26,90,1],[102,29,90,1,"WebSocketFactory"],[102,45,90,1],[103,2,90,1],[103,6,90,1,"_default"],[103,14,90,1],[103,17,90,1,"exports"],[103,24,90,1],[103,25,90,1,"default"],[103,32,90,1],[103,35,91,15,"WebSocketFactory"],[103,51,91,31],[104,0,91,31],[104,3]],"functionMap":{"names":["<global>","WebSocketFactory","WebSocketFactory.detectEnvironment","WebSocketFactory.getWebSocketConstructor","WebSocketFactory.createWebSocket","WebSocketFactory.isWebSocketSupported"],"mappings":"AAA,OC;ICC;KD+D;IEC;KFU;IGC;KHG;IIC;KJQ;CDC"}},"type":"js/module"}]}