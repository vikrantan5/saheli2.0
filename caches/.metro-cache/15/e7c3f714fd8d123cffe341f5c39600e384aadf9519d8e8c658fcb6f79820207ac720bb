{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"expo-modules-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":45,"index":45}}],"key":"fU8WLIPqoAGygnPbZ/QJiQQfXEY=","exportNames":["*"]}},{"name":"./ExpoLocation","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":46},"end":{"line":2,"column":42,"index":88}}],"key":"n9eQB3huKj/lRnIsgaXRKPJKjaY=","exportNames":["*"]}},{"name":"./Location.types","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":89},"end":{"line":3,"column":52,"index":141}}],"key":"QoIrjHWCWA2K0AZhEI/d0eITBhA=","exportNames":["*"]}},{"name":"./LocationSubscribers","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":142},"end":{"line":4,"column":59,"index":201}}],"key":"ECD2ecHoQ4d6PxMbJzhCjCmKfZg=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.installWebGeolocationPolyfill = installWebGeolocationPolyfill;\n  var _expoModulesCore = require(_dependencyMap[1], \"expo-modules-core\");\n  var _ExpoLocation = _interopRequireDefault(require(_dependencyMap[2], \"./ExpoLocation\"));\n  var _Location = require(_dependencyMap[3], \"./Location.types\");\n  var _LocationSubscribers = require(_dependencyMap[4], \"./LocationSubscribers\");\n  // @needsAudit\n  /**\n   * Polyfills `navigator.geolocation` for interop with the core React Native and Web API approach to geolocation.\n   */\n  function installWebGeolocationPolyfill() {\n    if (_expoModulesCore.Platform.OS !== 'web') {\n      // Make sure `window.navigator` is defined in the global scope.\n      if (!('window' in global)) {\n        global.window = global;\n      }\n      if (!('navigator' in global.window)) {\n        global.window.navigator = {};\n      }\n      // @ts-ignore\n      window.navigator.geolocation = {\n        getCurrentPosition,\n        watchPosition,\n        clearWatch\n      };\n    }\n  }\n  function convertGeolocationOptions(options) {\n    return {\n      accuracy: options.enableHighAccuracy ? _Location.LocationAccuracy.High : _Location.LocationAccuracy.Balanced\n    };\n  }\n  function getCurrentPosition(success, error = () => {}, options = {}) {\n    _getCurrentPositionAsyncWrapper(success, error, options);\n  }\n  // This function exists to let us continue to return undefined from getCurrentPosition, while still\n  // using async/await for the internal implementation of it\n  async function _getCurrentPositionAsyncWrapper(success, error, options) {\n    try {\n      await _ExpoLocation.default.requestPermissionsAsync();\n      const result = await _ExpoLocation.default.getCurrentPositionAsync(convertGeolocationOptions(options));\n      success(result);\n    } catch (e) {\n      error(e);\n    }\n  }\n  // Polyfill: navigator.geolocation.watchPosition\n  function watchPosition(success, error, options) {\n    const watchId = _LocationSubscribers.LocationSubscriber.registerCallback(success);\n    _ExpoLocation.default.watchPositionImplAsync(watchId, options).catch(err => {\n      _LocationSubscribers.LocationSubscriber.unregisterCallback(watchId);\n      error({\n        watchId,\n        message: err.message,\n        code: err.code\n      });\n    });\n    return watchId;\n  }\n  // Polyfill: navigator.geolocation.clearWatch\n  function clearWatch(watchId) {\n    _LocationSubscribers.LocationSubscriber.unregisterCallback(watchId);\n  }\n});","lineCount":68,"map":[[7,2,1,0],[7,6,1,0,"_expoModulesCore"],[7,22,1,0],[7,25,1,0,"require"],[7,32,1,0],[7,33,1,0,"_dependencyMap"],[7,47,1,0],[8,2,2,0],[8,6,2,0,"_ExpoLocation"],[8,19,2,0],[8,22,2,0,"_interopRequireDefault"],[8,44,2,0],[8,45,2,0,"require"],[8,52,2,0],[8,53,2,0,"_dependencyMap"],[8,67,2,0],[9,2,3,0],[9,6,3,0,"_Location"],[9,15,3,0],[9,18,3,0,"require"],[9,25,3,0],[9,26,3,0,"_dependencyMap"],[9,40,3,0],[10,2,4,0],[10,6,4,0,"_LocationSubscribers"],[10,26,4,0],[10,29,4,0,"require"],[10,36,4,0],[10,37,4,0,"_dependencyMap"],[10,51,4,0],[11,2,5,0],[12,2,6,0],[13,0,7,0],[14,0,8,0],[15,2,9,7],[15,11,9,16,"installWebGeolocationPolyfill"],[15,40,9,45,"installWebGeolocationPolyfill"],[15,41,9,45],[15,43,9,48],[16,4,10,4],[16,8,10,8,"Platform"],[16,33,10,16],[16,34,10,17,"OS"],[16,36,10,19],[16,41,10,24],[16,46,10,29],[16,48,10,31],[17,6,11,8],[18,6,12,8],[18,10,12,12],[18,12,12,14],[18,20,12,22],[18,24,12,26,"global"],[18,30,12,32],[18,31,12,33],[18,33,12,35],[19,8,13,12,"global"],[19,14,13,18],[19,15,13,19,"window"],[19,21,13,25],[19,24,13,28,"global"],[19,30,13,34],[20,6,14,8],[21,6,15,8],[21,10,15,12],[21,12,15,14],[21,23,15,25],[21,27,15,29,"global"],[21,33,15,35],[21,34,15,36,"window"],[21,40,15,42],[21,41,15,43],[21,43,15,45],[22,8,16,12,"global"],[22,14,16,18],[22,15,16,19,"window"],[22,21,16,25],[22,22,16,26,"navigator"],[22,31,16,35],[22,34,16,38],[22,35,16,39],[22,36,16,40],[23,6,17,8],[24,6,18,8],[25,6,19,8,"window"],[25,12,19,14],[25,13,19,15,"navigator"],[25,22,19,24],[25,23,19,25,"geolocation"],[25,34,19,36],[25,37,19,39],[26,8,20,12,"getCurrentPosition"],[26,26,20,30],[27,8,21,12,"watchPosition"],[27,21,21,25],[28,8,22,12,"clearWatch"],[29,6,23,8],[29,7,23,9],[30,4,24,4],[31,2,25,0],[32,2,26,0],[32,11,26,9,"convertGeolocationOptions"],[32,36,26,34,"convertGeolocationOptions"],[32,37,26,35,"options"],[32,44,26,42],[32,46,26,44],[33,4,27,4],[33,11,27,11],[34,6,28,8,"accuracy"],[34,14,28,16],[34,16,28,18,"options"],[34,23,28,25],[34,24,28,26,"enableHighAccuracy"],[34,42,28,44],[34,45,28,47,"LocationAccuracy"],[34,71,28,63],[34,72,28,64,"High"],[34,76,28,68],[34,79,28,71,"LocationAccuracy"],[34,105,28,87],[34,106,28,88,"Balanced"],[35,4,29,4],[35,5,29,5],[36,2,30,0],[37,2,31,0],[37,11,31,9,"getCurrentPosition"],[37,29,31,27,"getCurrentPosition"],[37,30,31,28,"success"],[37,37,31,35],[37,39,31,37,"error"],[37,44,31,42],[37,47,31,45,"error"],[37,48,31,45],[37,53,31,51],[37,54,31,53],[37,55,31,54],[37,57,31,56,"options"],[37,64,31,63],[37,67,31,66],[37,68,31,67],[37,69,31,68],[37,71,31,70],[38,4,32,4,"_getCurrentPositionAsyncWrapper"],[38,35,32,35],[38,36,32,36,"success"],[38,43,32,43],[38,45,32,45,"error"],[38,50,32,50],[38,52,32,52,"options"],[38,59,32,59],[38,60,32,60],[39,2,33,0],[40,2,34,0],[41,2,35,0],[42,2,36,0],[42,17,36,15,"_getCurrentPositionAsyncWrapper"],[42,48,36,46,"_getCurrentPositionAsyncWrapper"],[42,49,36,47,"success"],[42,56,36,54],[42,58,36,56,"error"],[42,63,36,61],[42,65,36,63,"options"],[42,72,36,70],[42,74,36,72],[43,4,37,4],[43,8,37,8],[44,6,38,8],[44,12,38,14,"ExpoLocation"],[44,33,38,26],[44,34,38,27,"requestPermissionsAsync"],[44,57,38,50],[44,58,38,51],[44,59,38,52],[45,6,39,8],[45,12,39,14,"result"],[45,18,39,20],[45,21,39,23],[45,27,39,29,"ExpoLocation"],[45,48,39,41],[45,49,39,42,"getCurrentPositionAsync"],[45,72,39,65],[45,73,39,66,"convertGeolocationOptions"],[45,98,39,91],[45,99,39,92,"options"],[45,106,39,99],[45,107,39,100],[45,108,39,101],[46,6,40,8,"success"],[46,13,40,15],[46,14,40,16,"result"],[46,20,40,22],[46,21,40,23],[47,4,41,4],[47,5,41,5],[47,6,42,4],[47,13,42,11,"e"],[47,14,42,12],[47,16,42,14],[48,6,43,8,"error"],[48,11,43,13],[48,12,43,14,"e"],[48,13,43,15],[48,14,43,16],[49,4,44,4],[50,2,45,0],[51,2,46,0],[52,2,47,0],[52,11,47,9,"watchPosition"],[52,24,47,22,"watchPosition"],[52,25,47,23,"success"],[52,32,47,30],[52,34,47,32,"error"],[52,39,47,37],[52,41,47,39,"options"],[52,48,47,46],[52,50,47,48],[53,4,48,4],[53,10,48,10,"watchId"],[53,17,48,17],[53,20,48,20,"LocationSubscriber"],[53,59,48,38],[53,60,48,39,"registerCallback"],[53,76,48,55],[53,77,48,56,"success"],[53,84,48,63],[53,85,48,64],[54,4,49,4,"ExpoLocation"],[54,25,49,16],[54,26,49,17,"watchPositionImplAsync"],[54,48,49,39],[54,49,49,40,"watchId"],[54,56,49,47],[54,58,49,49,"options"],[54,65,49,56],[54,66,49,57],[54,67,49,58,"catch"],[54,72,49,63],[54,73,49,65,"err"],[54,76,49,68],[54,80,49,73],[55,6,50,8,"LocationSubscriber"],[55,45,50,26],[55,46,50,27,"unregisterCallback"],[55,64,50,45],[55,65,50,46,"watchId"],[55,72,50,53],[55,73,50,54],[56,6,51,8,"error"],[56,11,51,13],[56,12,51,14],[57,8,51,16,"watchId"],[57,15,51,23],[58,8,51,25,"message"],[58,15,51,32],[58,17,51,34,"err"],[58,20,51,37],[58,21,51,38,"message"],[58,28,51,45],[59,8,51,47,"code"],[59,12,51,51],[59,14,51,53,"err"],[59,17,51,56],[59,18,51,57,"code"],[60,6,51,62],[60,7,51,63],[60,8,51,64],[61,4,52,4],[61,5,52,5],[61,6,52,6],[62,4,53,4],[62,11,53,11,"watchId"],[62,18,53,18],[63,2,54,0],[64,2,55,0],[65,2,56,0],[65,11,56,9,"clearWatch"],[65,21,56,19,"clearWatch"],[65,22,56,20,"watchId"],[65,29,56,27],[65,31,56,29],[66,4,57,4,"LocationSubscriber"],[66,43,57,22],[66,44,57,23,"unregisterCallback"],[66,62,57,41],[66,63,57,42,"watchId"],[66,70,57,49],[66,71,57,50],[67,2,58,0],[68,0,58,1],[68,3]],"functionMap":{"names":["<global>","installWebGeolocationPolyfill","convertGeolocationOptions","getCurrentPosition","<anonymous>","_getCurrentPositionAsyncWrapper","watchPosition","ExpoLocation.watchPositionImplAsync._catch$argument_0","clearWatch"],"mappings":"AAA;OCQ;CDgB;AEC;CFI;AGC,6CC,SD;CHE;AKG;CLS;AME;gECE;KDG;CNE;AQE;CRE"}},"type":"js/module"}]}