{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"]}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _classCallCheck = require(_dependencyMap[0], \"@babel/runtime/helpers/classCallCheck\");\n  var _createClass = require(_dependencyMap[1], \"@babel/runtime/helpers/createClass\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.WebSocketFactory = void 0;\n  var WebSocketFactory = /*#__PURE__*/function () {\n    function WebSocketFactory() {\n      _classCallCheck(this, WebSocketFactory);\n    }\n    return _createClass(WebSocketFactory, null, [{\n      key: \"detectEnvironment\",\n      value: function detectEnvironment() {\n        var _a;\n        if (typeof WebSocket !== 'undefined') {\n          return {\n            type: 'native',\n            constructor: WebSocket\n          };\n        }\n        if (typeof globalThis !== 'undefined' && typeof globalThis.WebSocket !== 'undefined') {\n          return {\n            type: 'native',\n            constructor: globalThis.WebSocket\n          };\n        }\n        if (typeof global !== 'undefined' && typeof global.WebSocket !== 'undefined') {\n          return {\n            type: 'native',\n            constructor: global.WebSocket\n          };\n        }\n        if (typeof globalThis !== 'undefined' && typeof globalThis.WebSocketPair !== 'undefined' && typeof globalThis.WebSocket === 'undefined') {\n          return {\n            type: 'cloudflare',\n            error: 'Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.',\n            workaround: 'Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime.'\n          };\n        }\n        if (typeof globalThis !== 'undefined' && globalThis.EdgeRuntime || typeof navigator !== 'undefined' && ((_a = navigator.userAgent) === null || _a === void 0 ? void 0 : _a.includes('Vercel-Edge'))) {\n          return {\n            type: 'unsupported',\n            error: 'Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.',\n            workaround: 'Use serverless functions or a different deployment target for WebSocket functionality.'\n          };\n        }\n        if (typeof process !== 'undefined') {\n          // Use dynamic property access to avoid Next.js Edge Runtime static analysis warnings\n          var processVersions = process['versions'];\n          if (processVersions && processVersions['node']) {\n            // Remove 'v' prefix if present and parse the major version\n            var versionString = processVersions['node'];\n            var nodeVersion = parseInt(versionString.replace(/^v/, '').split('.')[0]);\n            // Node.js 22+ should have native WebSocket\n            if (nodeVersion >= 22) {\n              // Check if native WebSocket is available (should be in Node.js 22+)\n              if (typeof globalThis.WebSocket !== 'undefined') {\n                return {\n                  type: 'native',\n                  constructor: globalThis.WebSocket\n                };\n              }\n              // If not available, user needs to provide it\n              return {\n                type: 'unsupported',\n                error: `Node.js ${nodeVersion} detected but native WebSocket not found.`,\n                workaround: 'Provide a WebSocket implementation via the transport option.'\n              };\n            }\n            // Node.js < 22 doesn't have native WebSocket\n            return {\n              type: 'unsupported',\n              error: `Node.js ${nodeVersion} detected without native WebSocket support.`,\n              workaround: 'For Node.js < 22, install \"ws\" package and provide it via the transport option:\\n' + 'import ws from \"ws\"\\n' + 'new RealtimeClient(url, { transport: ws })'\n            };\n          }\n        }\n        return {\n          type: 'unsupported',\n          error: 'Unknown JavaScript runtime without WebSocket support.',\n          workaround: \"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation.\"\n        };\n      }\n    }, {\n      key: \"getWebSocketConstructor\",\n      value: function getWebSocketConstructor() {\n        var env = this.detectEnvironment();\n        if (env.constructor) {\n          return env.constructor;\n        }\n        var errorMessage = env.error || 'WebSocket not supported in this environment.';\n        if (env.workaround) {\n          errorMessage += `\\n\\nSuggested solution: ${env.workaround}`;\n        }\n        throw new Error(errorMessage);\n      }\n    }, {\n      key: \"createWebSocket\",\n      value: function createWebSocket(url, protocols) {\n        var WS = this.getWebSocketConstructor();\n        return new WS(url, protocols);\n      }\n    }, {\n      key: \"isWebSocketSupported\",\n      value: function isWebSocketSupported() {\n        try {\n          var env = this.detectEnvironment();\n          return env.type === 'native' || env.type === 'ws';\n        } catch (_a) {\n          return false;\n        }\n      }\n    }]);\n  }();\n  exports.WebSocketFactory = WebSocketFactory;\n  exports.default = WebSocketFactory;\n});","lineCount":120,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13],[4,6,1,13,"_classCallCheck"],[4,21,1,13],[4,24,1,13,"require"],[4,31,1,13],[4,32,1,13,"_dependencyMap"],[4,46,1,13],[5,2,1,13],[5,6,1,13,"_createClass"],[5,18,1,13],[5,21,1,13,"require"],[5,28,1,13],[5,29,1,13,"_dependencyMap"],[5,43,1,13],[6,2,2,0,"Object"],[6,8,2,6],[6,9,2,7,"defineProperty"],[6,23,2,21],[6,24,2,22,"exports"],[6,31,2,29],[6,33,2,31],[6,45,2,43],[6,47,2,45],[7,4,2,47,"value"],[7,9,2,52],[7,11,2,54],[8,2,2,59],[8,3,2,60],[8,4,2,61],[9,2,3,0,"exports"],[9,9,3,7],[9,10,3,8,"WebSocketFactory"],[9,26,3,24],[9,29,3,27],[9,34,3,32],[9,35,3,33],[10,2,3,34],[10,6,4,6,"WebSocketFactory"],[10,22,4,22],[11,4,4,22],[11,13,4,22,"WebSocketFactory"],[11,30,4,22],[12,6,4,22,"_classCallCheck"],[12,21,4,22],[12,28,4,22,"WebSocketFactory"],[12,44,4,22],[13,4,4,22],[14,4,4,22],[14,11,4,22,"_createClass"],[14,23,4,22],[14,24,4,22,"WebSocketFactory"],[14,40,4,22],[15,6,4,22,"key"],[15,9,4,22],[16,6,4,22,"value"],[16,11,4,22],[16,13,5,4],[16,22,5,11,"detectEnvironment"],[16,39,5,28,"detectEnvironment"],[16,40,5,28],[16,42,5,31],[17,8,6,8],[17,12,6,12,"_a"],[17,14,6,14],[18,8,7,8],[18,12,7,12],[18,19,7,19,"WebSocket"],[18,28,7,28],[18,33,7,33],[18,44,7,44],[18,46,7,46],[19,10,8,12],[19,17,8,19],[20,12,8,21,"type"],[20,16,8,25],[20,18,8,27],[20,26,8,35],[21,12,8,37,"constructor"],[21,23,8,48],[21,25,8,50,"WebSocket"],[22,10,8,60],[22,11,8,61],[23,8,9,8],[24,8,10,8],[24,12,10,12],[24,19,10,19,"globalThis"],[24,29,10,29],[24,34,10,34],[24,45,10,45],[24,49,10,49],[24,56,10,56,"globalThis"],[24,66,10,66],[24,67,10,67,"WebSocket"],[24,76,10,76],[24,81,10,81],[24,92,10,92],[24,94,10,94],[25,10,11,12],[25,17,11,19],[26,12,11,21,"type"],[26,16,11,25],[26,18,11,27],[26,26,11,35],[27,12,11,37,"constructor"],[27,23,11,48],[27,25,11,50,"globalThis"],[27,35,11,60],[27,36,11,61,"WebSocket"],[28,10,11,71],[28,11,11,72],[29,8,12,8],[30,8,13,8],[30,12,13,12],[30,19,13,19,"global"],[30,25,13,25],[30,30,13,30],[30,41,13,41],[30,45,13,45],[30,52,13,52,"global"],[30,58,13,58],[30,59,13,59,"WebSocket"],[30,68,13,68],[30,73,13,73],[30,84,13,84],[30,86,13,86],[31,10,14,12],[31,17,14,19],[32,12,14,21,"type"],[32,16,14,25],[32,18,14,27],[32,26,14,35],[33,12,14,37,"constructor"],[33,23,14,48],[33,25,14,50,"global"],[33,31,14,56],[33,32,14,57,"WebSocket"],[34,10,14,67],[34,11,14,68],[35,8,15,8],[36,8,16,8],[36,12,16,12],[36,19,16,19,"globalThis"],[36,29,16,29],[36,34,16,34],[36,45,16,45],[36,49,17,12],[36,56,17,19,"globalThis"],[36,66,17,29],[36,67,17,30,"WebSocketPair"],[36,80,17,43],[36,85,17,48],[36,96,17,59],[36,100,18,12],[36,107,18,19,"globalThis"],[36,117,18,29],[36,118,18,30,"WebSocket"],[36,127,18,39],[36,132,18,44],[36,143,18,55],[36,145,18,57],[37,10,19,12],[37,17,19,19],[38,12,20,16,"type"],[38,16,20,20],[38,18,20,22],[38,30,20,34],[39,12,21,16,"error"],[39,17,21,21],[39,19,21,23],[39,108,21,112],[40,12,22,16,"workaround"],[40,22,22,26],[40,24,22,28],[41,10,23,12],[41,11,23,13],[42,8,24,8],[43,8,25,8],[43,12,25,13],[43,19,25,20,"globalThis"],[43,29,25,30],[43,34,25,35],[43,45,25,46],[43,49,25,50,"globalThis"],[43,59,25,60],[43,60,25,61,"EdgeRuntime"],[43,71,25,72],[43,75,26,13],[43,82,26,20,"navigator"],[43,91,26,29],[43,96,26,34],[43,107,26,45],[43,112,26,50],[43,113,26,51,"_a"],[43,115,26,53],[43,118,26,56,"navigator"],[43,127,26,65],[43,128,26,66,"userAgent"],[43,137,26,75],[43,143,26,81],[43,147,26,85],[43,151,26,89,"_a"],[43,153,26,91],[43,158,26,96],[43,163,26,101],[43,164,26,102],[43,167,26,105],[43,172,26,110],[43,173,26,111],[43,176,26,114,"_a"],[43,178,26,116],[43,179,26,117,"includes"],[43,187,26,125],[43,188,26,126],[43,201,26,139],[43,202,26,140],[43,203,26,142],[43,205,26,144],[44,10,27,12],[44,17,27,19],[45,12,28,16,"type"],[45,16,28,20],[45,18,28,22],[45,31,28,35],[46,12,29,16,"error"],[46,17,29,21],[46,19,29,23],[46,118,29,122],[47,12,30,16,"workaround"],[47,22,30,26],[47,24,30,28],[48,10,31,12],[48,11,31,13],[49,8,32,8],[50,8,33,8],[50,12,33,12],[50,19,33,19,"process"],[50,26,33,26],[50,31,33,31],[50,42,33,42],[50,44,33,44],[51,10,34,12],[52,10,35,12],[52,14,35,18,"processVersions"],[52,29,35,33],[52,32,35,36,"process"],[52,39,35,43],[52,40,35,44],[52,50,35,54],[52,51,35,55],[53,10,36,12],[53,14,36,16,"processVersions"],[53,29,36,31],[53,33,36,35,"processVersions"],[53,48,36,50],[53,49,36,51],[53,55,36,57],[53,56,36,58],[53,58,36,60],[54,12,37,16],[55,12,38,16],[55,16,38,22,"versionString"],[55,29,38,35],[55,32,38,38,"processVersions"],[55,47,38,53],[55,48,38,54],[55,54,38,60],[55,55,38,61],[56,12,39,16],[56,16,39,22,"nodeVersion"],[56,27,39,33],[56,30,39,36,"parseInt"],[56,38,39,44],[56,39,39,45,"versionString"],[56,52,39,58],[56,53,39,59,"replace"],[56,60,39,66],[56,61,39,67],[56,65,39,71],[56,67,39,73],[56,69,39,75],[56,70,39,76],[56,71,39,77,"split"],[56,76,39,82],[56,77,39,83],[56,80,39,86],[56,81,39,87],[56,82,39,88],[56,83,39,89],[56,84,39,90],[56,85,39,91],[57,12,40,16],[58,12,41,16],[58,16,41,20,"nodeVersion"],[58,27,41,31],[58,31,41,35],[58,33,41,37],[58,35,41,39],[59,14,42,20],[60,14,43,20],[60,18,43,24],[60,25,43,31,"globalThis"],[60,35,43,41],[60,36,43,42,"WebSocket"],[60,45,43,51],[60,50,43,56],[60,61,43,67],[60,63,43,69],[61,16,44,24],[61,23,44,31],[62,18,44,33,"type"],[62,22,44,37],[62,24,44,39],[62,32,44,47],[63,18,44,49,"constructor"],[63,29,44,60],[63,31,44,62,"globalThis"],[63,41,44,72],[63,42,44,73,"WebSocket"],[64,16,44,83],[64,17,44,84],[65,14,45,20],[66,14,46,20],[67,14,47,20],[67,21,47,27],[68,16,48,24,"type"],[68,20,48,28],[68,22,48,30],[68,35,48,43],[69,16,49,24,"error"],[69,21,49,29],[69,23,49,31],[69,34,49,42,"nodeVersion"],[69,45,49,53],[69,88,49,96],[70,16,50,24,"workaround"],[70,26,50,34],[70,28,50,36],[71,14,51,20],[71,15,51,21],[72,12,52,16],[73,12,53,16],[74,12,54,16],[74,19,54,23],[75,14,55,20,"type"],[75,18,55,24],[75,20,55,26],[75,33,55,39],[76,14,56,20,"error"],[76,19,56,25],[76,21,56,27],[76,32,56,38,"nodeVersion"],[76,43,56,49],[76,88,56,94],[77,14,57,20,"workaround"],[77,24,57,30],[77,26,57,32],[77,109,57,115],[77,112,58,24],[77,135,58,47],[77,138,59,24],[78,12,60,16],[78,13,60,17],[79,10,61,12],[80,8,62,8],[81,8,63,8],[81,15,63,15],[82,10,64,12,"type"],[82,14,64,16],[82,16,64,18],[82,29,64,31],[83,10,65,12,"error"],[83,15,65,17],[83,17,65,19],[83,72,65,74],[84,10,66,12,"workaround"],[84,20,66,22],[84,22,66,24],[85,8,67,8],[85,9,67,9],[86,6,68,4],[87,4,68,5],[88,6,68,5,"key"],[88,9,68,5],[89,6,68,5,"value"],[89,11,68,5],[89,13,69,4],[89,22,69,11,"getWebSocketConstructor"],[89,45,69,34,"getWebSocketConstructor"],[89,46,69,34],[89,48,69,37],[90,8,70,8],[90,12,70,14,"env"],[90,15,70,17],[90,18,70,20],[90,22,70,24],[90,23,70,25,"detectEnvironment"],[90,40,70,42],[90,41,70,43],[90,42,70,44],[91,8,71,8],[91,12,71,12,"env"],[91,15,71,15],[91,16,71,16,"constructor"],[91,27,71,27],[91,29,71,29],[92,10,72,12],[92,17,72,19,"env"],[92,20,72,22],[92,21,72,23,"constructor"],[92,32,72,34],[93,8,73,8],[94,8,74,8],[94,12,74,12,"errorMessage"],[94,24,74,24],[94,27,74,27,"env"],[94,30,74,30],[94,31,74,31,"error"],[94,36,74,36],[94,40,74,40],[94,86,74,86],[95,8,75,8],[95,12,75,12,"env"],[95,15,75,15],[95,16,75,16,"workaround"],[95,26,75,26],[95,28,75,28],[96,10,76,12,"errorMessage"],[96,22,76,24],[96,26,76,28],[96,53,76,55,"env"],[96,56,76,58],[96,57,76,59,"workaround"],[96,67,76,69],[96,69,76,71],[97,8,77,8],[98,8,78,8],[98,14,78,14],[98,18,78,18,"Error"],[98,23,78,23],[98,24,78,24,"errorMessage"],[98,36,78,36],[98,37,78,37],[99,6,79,4],[100,4,79,5],[101,6,79,5,"key"],[101,9,79,5],[102,6,79,5,"value"],[102,11,79,5],[102,13,80,4],[102,22,80,11,"createWebSocket"],[102,37,80,26,"createWebSocket"],[102,38,80,27,"url"],[102,41,80,30],[102,43,80,32,"protocols"],[102,52,80,41],[102,54,80,43],[103,8,81,8],[103,12,81,14,"WS"],[103,14,81,16],[103,17,81,19],[103,21,81,23],[103,22,81,24,"getWebSocketConstructor"],[103,45,81,47],[103,46,81,48],[103,47,81,49],[104,8,82,8],[104,15,82,15],[104,19,82,19,"WS"],[104,21,82,21],[104,22,82,22,"url"],[104,25,82,25],[104,27,82,27,"protocols"],[104,36,82,36],[104,37,82,37],[105,6,83,4],[106,4,83,5],[107,6,83,5,"key"],[107,9,83,5],[108,6,83,5,"value"],[108,11,83,5],[108,13,84,4],[108,22,84,11,"isWebSocketSupported"],[108,42,84,31,"isWebSocketSupported"],[108,43,84,31],[108,45,84,34],[109,8,85,8],[109,12,85,12],[110,10,86,12],[110,14,86,18,"env"],[110,17,86,21],[110,20,86,24],[110,24,86,28],[110,25,86,29,"detectEnvironment"],[110,42,86,46],[110,43,86,47],[110,44,86,48],[111,10,87,12],[111,17,87,19,"env"],[111,20,87,22],[111,21,87,23,"type"],[111,25,87,27],[111,30,87,32],[111,38,87,40],[111,42,87,44,"env"],[111,45,87,47],[111,46,87,48,"type"],[111,50,87,52],[111,55,87,57],[111,59,87,61],[112,8,88,8],[112,9,88,9],[112,10,89,8],[112,17,89,15,"_a"],[112,19,89,17],[112,21,89,19],[113,10,90,12],[113,17,90,19],[113,22,90,24],[114,8,91,8],[115,6,92,4],[116,4,92,5],[117,2,92,5],[118,2,94,0,"exports"],[118,9,94,7],[118,10,94,8,"WebSocketFactory"],[118,26,94,24],[118,29,94,27,"WebSocketFactory"],[118,45,94,43],[119,2,95,0,"exports"],[119,9,95,7],[119,10,95,8,"default"],[119,17,95,15],[119,20,95,18,"WebSocketFactory"],[119,36,95,34],[120,0,95,35],[120,3]],"functionMap":{"names":["<global>","WebSocketFactory","WebSocketFactory.detectEnvironment","WebSocketFactory.getWebSocketConstructor","WebSocketFactory.createWebSocket","WebSocketFactory.isWebSocketSupported"],"mappings":"AAA;ACG;ICC;KD+D;IEC;KFU;IGC;KHG;IIC;KJQ;CDC"}},"type":"js/module"}]}