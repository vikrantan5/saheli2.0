{"dependencies":[{"name":"./subscribable.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":24},"end":{"line":2,"column":49,"index":73}}],"key":"f0fxTGZggQRtb//cHMvH9AHIWOw=","exportNames":["*"]}},{"name":"./utils.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":74},"end":{"line":3,"column":38,"index":112}}],"key":"NIaSEHO1E48gsZc7jH9Ex1xTHgE=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.onlineManager = exports.OnlineManager = void 0;\n  var _subscribable = require(_dependencyMap[0], \"./subscribable.js\");\n  var _utils = require(_dependencyMap[1], \"./utils.js\");\n  // src/onlineManager.ts\n\n  var OnlineManager = class extends _subscribable.Subscribable {\n    #online = true;\n    #cleanup;\n    #setup;\n    constructor() {\n      super();\n      this.#setup = onOnline => {\n        if (!_utils.isServer && window.addEventListener) {\n          const onlineListener = () => onOnline(true);\n          const offlineListener = () => onOnline(false);\n          window.addEventListener(\"online\", onlineListener, false);\n          window.addEventListener(\"offline\", offlineListener, false);\n          return () => {\n            window.removeEventListener(\"online\", onlineListener);\n            window.removeEventListener(\"offline\", offlineListener);\n          };\n        }\n        return;\n      };\n    }\n    onSubscribe() {\n      if (!this.#cleanup) {\n        this.setEventListener(this.#setup);\n      }\n    }\n    onUnsubscribe() {\n      if (!this.hasListeners()) {\n        this.#cleanup?.();\n        this.#cleanup = void 0;\n      }\n    }\n    setEventListener(setup) {\n      this.#setup = setup;\n      this.#cleanup?.();\n      this.#cleanup = setup(this.setOnline.bind(this));\n    }\n    setOnline(online) {\n      const changed = this.#online !== online;\n      if (changed) {\n        this.#online = online;\n        this.listeners.forEach(listener => {\n          listener(online);\n        });\n      }\n    }\n    isOnline() {\n      return this.#online;\n    }\n  };\n  exports.OnlineManager = OnlineManager;\n  var onlineManager = exports.onlineManager = new OnlineManager();\n});","lineCount":61,"map":[[6,2,2,0],[6,6,2,0,"_subscribable"],[6,19,2,0],[6,22,2,0,"require"],[6,29,2,0],[6,30,2,0,"_dependencyMap"],[6,44,2,0],[7,2,3,0],[7,6,3,0,"_utils"],[7,12,3,0],[7,15,3,0,"require"],[7,22,3,0],[7,23,3,0,"_dependencyMap"],[7,37,3,0],[8,2,1,0],[10,2,4,0],[10,6,4,4,"OnlineManager"],[10,19,4,17],[10,22,4,20],[10,36,4,34,"Subscribable"],[10,62,4,46],[10,63,4,47],[11,4,5,2],[11,5,5,3,"online"],[11,11,5,9],[11,14,5,12],[11,18,5,16],[12,4,6,2],[12,5,6,3,"cleanup"],[12,12,6,10],[13,4,7,2],[13,5,7,3,"setup"],[13,10,7,8],[14,4,8,2,"constructor"],[14,15,8,13,"constructor"],[14,16,8,13],[14,18,8,16],[15,6,9,4],[15,11,9,9],[15,12,9,10],[15,13,9,11],[16,6,10,4],[16,10,10,8],[16,11,10,9],[16,12,10,10,"setup"],[16,17,10,15],[16,20,10,19,"onOnline"],[16,28,10,27],[16,32,10,32],[17,8,11,6],[17,12,11,10],[17,13,11,11,"isServer"],[17,28,11,19],[17,32,11,23,"window"],[17,38,11,29],[17,39,11,30,"addEventListener"],[17,55,11,46],[17,57,11,48],[18,10,12,8],[18,16,12,14,"onlineListener"],[18,30,12,28],[18,33,12,31,"onlineListener"],[18,34,12,31],[18,39,12,37,"onOnline"],[18,47,12,45],[18,48,12,46],[18,52,12,50],[18,53,12,51],[19,10,13,8],[19,16,13,14,"offlineListener"],[19,31,13,29],[19,34,13,32,"offlineListener"],[19,35,13,32],[19,40,13,38,"onOnline"],[19,48,13,46],[19,49,13,47],[19,54,13,52],[19,55,13,53],[20,10,14,8,"window"],[20,16,14,14],[20,17,14,15,"addEventListener"],[20,33,14,31],[20,34,14,32],[20,42,14,40],[20,44,14,42,"onlineListener"],[20,58,14,56],[20,60,14,58],[20,65,14,63],[20,66,14,64],[21,10,15,8,"window"],[21,16,15,14],[21,17,15,15,"addEventListener"],[21,33,15,31],[21,34,15,32],[21,43,15,41],[21,45,15,43,"offlineListener"],[21,60,15,58],[21,62,15,60],[21,67,15,65],[21,68,15,66],[22,10,16,8],[22,17,16,15],[22,23,16,21],[23,12,17,10,"window"],[23,18,17,16],[23,19,17,17,"removeEventListener"],[23,38,17,36],[23,39,17,37],[23,47,17,45],[23,49,17,47,"onlineListener"],[23,63,17,61],[23,64,17,62],[24,12,18,10,"window"],[24,18,18,16],[24,19,18,17,"removeEventListener"],[24,38,18,36],[24,39,18,37],[24,48,18,46],[24,50,18,48,"offlineListener"],[24,65,18,63],[24,66,18,64],[25,10,19,8],[25,11,19,9],[26,8,20,6],[27,8,21,6],[28,6,22,4],[28,7,22,5],[29,4,23,2],[30,4,24,2,"onSubscribe"],[30,15,24,13,"onSubscribe"],[30,16,24,13],[30,18,24,16],[31,6,25,4],[31,10,25,8],[31,11,25,9],[31,15,25,13],[31,16,25,14],[31,17,25,15,"cleanup"],[31,24,25,22],[31,26,25,24],[32,8,26,6],[32,12,26,10],[32,13,26,11,"setEventListener"],[32,29,26,27],[32,30,26,28],[32,34,26,32],[32,35,26,33],[32,36,26,34,"setup"],[32,41,26,39],[32,42,26,40],[33,6,27,4],[34,4,28,2],[35,4,29,2,"onUnsubscribe"],[35,17,29,15,"onUnsubscribe"],[35,18,29,15],[35,20,29,18],[36,6,30,4],[36,10,30,8],[36,11,30,9],[36,15,30,13],[36,16,30,14,"hasListeners"],[36,28,30,26],[36,29,30,27],[36,30,30,28],[36,32,30,30],[37,8,31,6],[37,12,31,10],[37,13,31,11],[37,14,31,12,"cleanup"],[37,21,31,19],[37,24,31,22],[37,25,31,23],[38,8,32,6],[38,12,32,10],[38,13,32,11],[38,14,32,12,"cleanup"],[38,21,32,19],[38,24,32,22],[38,29,32,27],[38,30,32,28],[39,6,33,4],[40,4,34,2],[41,4,35,2,"setEventListener"],[41,20,35,18,"setEventListener"],[41,21,35,19,"setup"],[41,26,35,24],[41,28,35,26],[42,6,36,4],[42,10,36,8],[42,11,36,9],[42,12,36,10,"setup"],[42,17,36,15],[42,20,36,18,"setup"],[42,25,36,23],[43,6,37,4],[43,10,37,8],[43,11,37,9],[43,12,37,10,"cleanup"],[43,19,37,17],[43,22,37,20],[43,23,37,21],[44,6,38,4],[44,10,38,8],[44,11,38,9],[44,12,38,10,"cleanup"],[44,19,38,17],[44,22,38,20,"setup"],[44,27,38,25],[44,28,38,26],[44,32,38,30],[44,33,38,31,"setOnline"],[44,42,38,40],[44,43,38,41,"bind"],[44,47,38,45],[44,48,38,46],[44,52,38,50],[44,53,38,51],[44,54,38,52],[45,4,39,2],[46,4,40,2,"setOnline"],[46,13,40,11,"setOnline"],[46,14,40,12,"online"],[46,20,40,18],[46,22,40,20],[47,6,41,4],[47,12,41,10,"changed"],[47,19,41,17],[47,22,41,20],[47,26,41,24],[47,27,41,25],[47,28,41,26,"online"],[47,34,41,32],[47,39,41,37,"online"],[47,45,41,43],[48,6,42,4],[48,10,42,8,"changed"],[48,17,42,15],[48,19,42,17],[49,8,43,6],[49,12,43,10],[49,13,43,11],[49,14,43,12,"online"],[49,20,43,18],[49,23,43,21,"online"],[49,29,43,27],[50,8,44,6],[50,12,44,10],[50,13,44,11,"listeners"],[50,22,44,20],[50,23,44,21,"forEach"],[50,30,44,28],[50,31,44,30,"listener"],[50,39,44,38],[50,43,44,43],[51,10,45,8,"listener"],[51,18,45,16],[51,19,45,17,"online"],[51,25,45,23],[51,26,45,24],[52,8,46,6],[52,9,46,7],[52,10,46,8],[53,6,47,4],[54,4,48,2],[55,4,49,2,"isOnline"],[55,12,49,10,"isOnline"],[55,13,49,10],[55,15,49,13],[56,6,50,4],[56,13,50,11],[56,17,50,15],[56,18,50,16],[56,19,50,17,"online"],[56,25,50,23],[57,4,51,2],[58,2,52,0],[58,3,52,1],[59,2,52,2,"exports"],[59,9,52,2],[59,10,52,2,"OnlineManager"],[59,23,52,2],[59,26,52,2,"OnlineManager"],[59,39,52,2],[60,2,53,0],[60,6,53,4,"onlineManager"],[60,19,53,17],[60,22,53,17,"exports"],[60,29,53,17],[60,30,53,17,"onlineManager"],[60,43,53,17],[60,46,53,20],[60,50,53,24,"OnlineManager"],[60,63,53,37],[60,64,53,38],[60,65,53,39],[61,0,53,40],[61,3]],"functionMap":{"names":["<global>","OnlineManager","OnlineManager#constructor","<anonymous>","onlineListener","offlineListener","OnlineManager#onSubscribe","OnlineManager#onUnsubscribe","OnlineManager#setEventListener","OnlineManager#setOnline","listeners.forEach$argument_0","OnlineManager#isOnline"],"mappings":"AAA;oBCG;ECI;kBCE;+BCE,oBD;gCEC,qBF;KDS;GDC;EKC;GLI;EMC;GNK;EOC;GPI;EQC;6BCI;ODE;GRE;EUC;GVE;CDC"}},"type":"js/module"}]}