{"dependencies":[{"name":"./Updates","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":37,"index":37}}],"key":"dHmtn1izBCeSkZ/2BgK9eSyi8a8=","exportNames":["*"]}},{"name":"./UseUpdates.types","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":38},"end":{"line":2,"column":53,"index":91}}],"key":"c/0dTIDFMt3vtNcWYCgpJC9RQHM=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.updatesStateFromContext = exports.updateFromRollback = exports.updateFromManifest = exports.currentlyRunning = void 0;\n  var Updates = _interopRequireWildcard(require(_dependencyMap[0], \"./Updates\"));\n  var _UseUpdates = require(_dependencyMap[1], \"./UseUpdates.types\");\n  function _interopRequireWildcard(e, t) { if (\"function\" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t in e) \"default\" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]); return f; })(e, t); }\n  // The currently running info, constructed from Updates constants\n  var currentlyRunning = exports.currentlyRunning = {\n    updateId: Updates.updateId ?? undefined,\n    channel: Updates.channel ?? undefined,\n    createdAt: Updates.createdAt ?? undefined,\n    launchDuration: Updates.launchDuration ?? undefined,\n    isEmbeddedLaunch: Updates.isEmbeddedLaunch,\n    isEmergencyLaunch: Updates.isEmergencyLaunch,\n    emergencyLaunchReason: Updates.emergencyLaunchReason,\n    manifest: Updates.manifest ?? undefined,\n    runtimeVersion: Updates.runtimeVersion ?? undefined\n  };\n  // Constructs an UpdateInfo from a manifest\n  var updateFromManifest = manifest => {\n    return {\n      type: _UseUpdates.UpdateInfoType.NEW,\n      updateId: manifest.id ?? '',\n      createdAt: manifest && 'createdAt' in manifest && manifest.createdAt ? new Date(manifest.createdAt) :\n      // We should never reach this if the manifest is valid and has a commit time,\n      // but leave this in so that createdAt is always defined\n      new Date(0),\n      manifest\n    };\n  };\n  exports.updateFromManifest = updateFromManifest;\n  var updateFromRollback = rollback => ({\n    type: _UseUpdates.UpdateInfoType.ROLLBACK,\n    createdAt: new Date(rollback.commitTime),\n    manifest: undefined,\n    updateId: undefined\n  });\n  // Transform the useUpdates() state based on native state machine context\n  exports.updateFromRollback = updateFromRollback;\n  var updatesStateFromContext = context => {\n    var availableUpdate = context?.latestManifest ? updateFromManifest(context?.latestManifest) : context.rollback ? updateFromRollback(context.rollback) : undefined;\n    var downloadedUpdate = context?.downloadedManifest ? updateFromManifest(context?.downloadedManifest) : context.rollback ? updateFromRollback(context.rollback) : undefined;\n    return {\n      isStartupProcedureRunning: context.isStartupProcedureRunning,\n      isUpdateAvailable: context.isUpdateAvailable,\n      isUpdatePending: context.isUpdatePending,\n      isChecking: context.isChecking,\n      isDownloading: context.isDownloading,\n      isRestarting: context.isRestarting,\n      restartCount: context.restartCount,\n      availableUpdate,\n      downloadedUpdate,\n      checkError: context.checkError,\n      downloadError: context.downloadError,\n      lastCheckForUpdateTimeSinceRestart: context.lastCheckForUpdateTime\n    };\n  };\n  exports.updatesStateFromContext = updatesStateFromContext;\n});","lineCount":61,"map":[[6,2,1,0],[6,6,1,0,"Updates"],[6,13,1,0],[6,16,1,0,"_interopRequireWildcard"],[6,39,1,0],[6,40,1,0,"require"],[6,47,1,0],[6,48,1,0,"_dependencyMap"],[6,62,1,0],[7,2,2,0],[7,6,2,0,"_UseUpdates"],[7,17,2,0],[7,20,2,0,"require"],[7,27,2,0],[7,28,2,0,"_dependencyMap"],[7,42,2,0],[8,2,2,53],[8,11,2,53,"_interopRequireWildcard"],[8,35,2,53,"e"],[8,36,2,53],[8,38,2,53,"t"],[8,39,2,53],[8,68,2,53,"WeakMap"],[8,75,2,53],[8,81,2,53,"r"],[8,82,2,53],[8,89,2,53,"WeakMap"],[8,96,2,53],[8,100,2,53,"n"],[8,101,2,53],[8,108,2,53,"WeakMap"],[8,115,2,53],[8,127,2,53,"_interopRequireWildcard"],[8,150,2,53],[8,162,2,53,"_interopRequireWildcard"],[8,163,2,53,"e"],[8,164,2,53],[8,166,2,53,"t"],[8,167,2,53],[8,176,2,53,"t"],[8,177,2,53],[8,181,2,53,"e"],[8,182,2,53],[8,186,2,53,"e"],[8,187,2,53],[8,188,2,53,"__esModule"],[8,198,2,53],[8,207,2,53,"e"],[8,208,2,53],[8,214,2,53,"o"],[8,215,2,53],[8,217,2,53,"i"],[8,218,2,53],[8,220,2,53,"f"],[8,221,2,53],[8,226,2,53,"__proto__"],[8,235,2,53],[8,243,2,53,"default"],[8,250,2,53],[8,252,2,53,"e"],[8,253,2,53],[8,270,2,53,"e"],[8,271,2,53],[8,294,2,53,"e"],[8,295,2,53],[8,320,2,53,"e"],[8,321,2,53],[8,330,2,53,"f"],[8,331,2,53],[8,337,2,53,"o"],[8,338,2,53],[8,341,2,53,"t"],[8,342,2,53],[8,345,2,53,"n"],[8,346,2,53],[8,349,2,53,"r"],[8,350,2,53],[8,358,2,53,"o"],[8,359,2,53],[8,360,2,53,"has"],[8,363,2,53],[8,364,2,53,"e"],[8,365,2,53],[8,375,2,53,"o"],[8,376,2,53],[8,377,2,53,"get"],[8,380,2,53],[8,381,2,53,"e"],[8,382,2,53],[8,385,2,53,"o"],[8,386,2,53],[8,387,2,53,"set"],[8,390,2,53],[8,391,2,53,"e"],[8,392,2,53],[8,394,2,53,"f"],[8,395,2,53],[8,409,2,53,"_t"],[8,411,2,53],[8,415,2,53,"e"],[8,416,2,53],[8,432,2,53,"_t"],[8,434,2,53],[8,441,2,53,"hasOwnProperty"],[8,455,2,53],[8,456,2,53,"call"],[8,460,2,53],[8,461,2,53,"e"],[8,462,2,53],[8,464,2,53,"_t"],[8,466,2,53],[8,473,2,53,"i"],[8,474,2,53],[8,478,2,53,"o"],[8,479,2,53],[8,482,2,53,"Object"],[8,488,2,53],[8,489,2,53,"defineProperty"],[8,503,2,53],[8,508,2,53,"Object"],[8,514,2,53],[8,515,2,53,"getOwnPropertyDescriptor"],[8,539,2,53],[8,540,2,53,"e"],[8,541,2,53],[8,543,2,53,"_t"],[8,545,2,53],[8,552,2,53,"i"],[8,553,2,53],[8,554,2,53,"get"],[8,557,2,53],[8,561,2,53,"i"],[8,562,2,53],[8,563,2,53,"set"],[8,566,2,53],[8,570,2,53,"o"],[8,571,2,53],[8,572,2,53,"f"],[8,573,2,53],[8,575,2,53,"_t"],[8,577,2,53],[8,579,2,53,"i"],[8,580,2,53],[8,584,2,53,"f"],[8,585,2,53],[8,586,2,53,"_t"],[8,588,2,53],[8,592,2,53,"e"],[8,593,2,53],[8,594,2,53,"_t"],[8,596,2,53],[8,607,2,53,"f"],[8,608,2,53],[8,613,2,53,"e"],[8,614,2,53],[8,616,2,53,"t"],[8,617,2,53],[9,2,3,0],[10,2,4,7],[10,6,4,13,"currentlyRunning"],[10,22,4,29],[10,25,4,29,"exports"],[10,32,4,29],[10,33,4,29,"currentlyRunning"],[10,49,4,29],[10,52,4,32],[11,4,5,4,"updateId"],[11,12,5,12],[11,14,5,14,"Updates"],[11,21,5,21],[11,22,5,22,"updateId"],[11,30,5,30],[11,34,5,34,"undefined"],[11,43,5,43],[12,4,6,4,"channel"],[12,11,6,11],[12,13,6,13,"Updates"],[12,20,6,20],[12,21,6,21,"channel"],[12,28,6,28],[12,32,6,32,"undefined"],[12,41,6,41],[13,4,7,4,"createdAt"],[13,13,7,13],[13,15,7,15,"Updates"],[13,22,7,22],[13,23,7,23,"createdAt"],[13,32,7,32],[13,36,7,36,"undefined"],[13,45,7,45],[14,4,8,4,"launchDuration"],[14,18,8,18],[14,20,8,20,"Updates"],[14,27,8,27],[14,28,8,28,"launchDuration"],[14,42,8,42],[14,46,8,46,"undefined"],[14,55,8,55],[15,4,9,4,"isEmbeddedLaunch"],[15,20,9,20],[15,22,9,22,"Updates"],[15,29,9,29],[15,30,9,30,"isEmbeddedLaunch"],[15,46,9,46],[16,4,10,4,"isEmergencyLaunch"],[16,21,10,21],[16,23,10,23,"Updates"],[16,30,10,30],[16,31,10,31,"isEmergencyLaunch"],[16,48,10,48],[17,4,11,4,"emergencyLaunchReason"],[17,25,11,25],[17,27,11,27,"Updates"],[17,34,11,34],[17,35,11,35,"emergencyLaunchReason"],[17,56,11,56],[18,4,12,4,"manifest"],[18,12,12,12],[18,14,12,14,"Updates"],[18,21,12,21],[18,22,12,22,"manifest"],[18,30,12,30],[18,34,12,34,"undefined"],[18,43,12,43],[19,4,13,4,"runtimeVersion"],[19,18,13,18],[19,20,13,20,"Updates"],[19,27,13,27],[19,28,13,28,"runtimeVersion"],[19,42,13,42],[19,46,13,46,"undefined"],[20,2,14,0],[20,3,14,1],[21,2,15,0],[22,2,16,7],[22,6,16,13,"updateFromManifest"],[22,24,16,31],[22,27,16,35,"manifest"],[22,35,16,43],[22,39,16,48],[23,4,17,4],[23,11,17,11],[24,6,18,8,"type"],[24,10,18,12],[24,12,18,14,"UpdateInfoType"],[24,38,18,28],[24,39,18,29,"NEW"],[24,42,18,32],[25,6,19,8,"updateId"],[25,14,19,16],[25,16,19,18,"manifest"],[25,24,19,26],[25,25,19,27,"id"],[25,27,19,29],[25,31,19,33],[25,33,19,35],[26,6,20,8,"createdAt"],[26,15,20,17],[26,17,20,19,"manifest"],[26,25,20,27],[26,29,20,31],[26,40,20,42],[26,44,20,46,"manifest"],[26,52,20,54],[26,56,20,58,"manifest"],[26,64,20,66],[26,65,20,67,"createdAt"],[26,74,20,76],[26,77,21,14],[26,81,21,18,"Date"],[26,85,21,22],[26,86,21,23,"manifest"],[26,94,21,31],[26,95,21,32,"createdAt"],[26,104,21,41],[26,105,21,42],[27,6,22,14],[28,6,23,16],[29,6,24,16],[29,10,24,20,"Date"],[29,14,24,24],[29,15,24,25],[29,16,24,26],[29,17,24,27],[30,6,25,8,"manifest"],[31,4,26,4],[31,5,26,5],[32,2,27,0],[32,3,27,1],[33,2,27,2,"exports"],[33,9,27,2],[33,10,27,2,"updateFromManifest"],[33,28,27,2],[33,31,27,2,"updateFromManifest"],[33,49,27,2],[34,2,28,7],[34,6,28,13,"updateFromRollback"],[34,24,28,31],[34,27,28,35,"rollback"],[34,35,28,43],[34,40,28,49],[35,4,29,4,"type"],[35,8,29,8],[35,10,29,10,"UpdateInfoType"],[35,36,29,24],[35,37,29,25,"ROLLBACK"],[35,45,29,33],[36,4,30,4,"createdAt"],[36,13,30,13],[36,15,30,15],[36,19,30,19,"Date"],[36,23,30,23],[36,24,30,24,"rollback"],[36,32,30,32],[36,33,30,33,"commitTime"],[36,43,30,43],[36,44,30,44],[37,4,31,4,"manifest"],[37,12,31,12],[37,14,31,14,"undefined"],[37,23,31,23],[38,4,32,4,"updateId"],[38,12,32,12],[38,14,32,14,"undefined"],[39,2,33,0],[39,3,33,1],[39,4,33,2],[40,2,34,0],[41,2,34,0,"exports"],[41,9,34,0],[41,10,34,0,"updateFromRollback"],[41,28,34,0],[41,31,34,0,"updateFromRollback"],[41,49,34,0],[42,2,35,7],[42,6,35,13,"updatesStateFromContext"],[42,29,35,36],[42,32,35,40,"context"],[42,39,35,47],[42,43,35,52],[43,4,36,4],[43,8,36,10,"availableUpdate"],[43,23,36,25],[43,26,36,28,"context"],[43,33,36,35],[43,35,36,37,"latestManifest"],[43,49,36,51],[43,52,37,10,"updateFromManifest"],[43,70,37,28],[43,71,37,29,"context"],[43,78,37,36],[43,80,37,38,"latestManifest"],[43,94,37,52],[43,95,37,53],[43,98,38,10,"context"],[43,105,38,17],[43,106,38,18,"rollback"],[43,114,38,26],[43,117,39,14,"updateFromRollback"],[43,135,39,32],[43,136,39,33,"context"],[43,143,39,40],[43,144,39,41,"rollback"],[43,152,39,49],[43,153,39,50],[43,156,40,14,"undefined"],[43,165,40,23],[44,4,41,4],[44,8,41,10,"downloadedUpdate"],[44,24,41,26],[44,27,41,29,"context"],[44,34,41,36],[44,36,41,38,"downloadedManifest"],[44,54,41,56],[44,57,42,10,"updateFromManifest"],[44,75,42,28],[44,76,42,29,"context"],[44,83,42,36],[44,85,42,38,"downloadedManifest"],[44,103,42,56],[44,104,42,57],[44,107,43,10,"context"],[44,114,43,17],[44,115,43,18,"rollback"],[44,123,43,26],[44,126,44,14,"updateFromRollback"],[44,144,44,32],[44,145,44,33,"context"],[44,152,44,40],[44,153,44,41,"rollback"],[44,161,44,49],[44,162,44,50],[44,165,45,14,"undefined"],[44,174,45,23],[45,4,46,4],[45,11,46,11],[46,6,47,8,"isStartupProcedureRunning"],[46,31,47,33],[46,33,47,35,"context"],[46,40,47,42],[46,41,47,43,"isStartupProcedureRunning"],[46,66,47,68],[47,6,48,8,"isUpdateAvailable"],[47,23,48,25],[47,25,48,27,"context"],[47,32,48,34],[47,33,48,35,"isUpdateAvailable"],[47,50,48,52],[48,6,49,8,"isUpdatePending"],[48,21,49,23],[48,23,49,25,"context"],[48,30,49,32],[48,31,49,33,"isUpdatePending"],[48,46,49,48],[49,6,50,8,"isChecking"],[49,16,50,18],[49,18,50,20,"context"],[49,25,50,27],[49,26,50,28,"isChecking"],[49,36,50,38],[50,6,51,8,"isDownloading"],[50,19,51,21],[50,21,51,23,"context"],[50,28,51,30],[50,29,51,31,"isDownloading"],[50,42,51,44],[51,6,52,8,"isRestarting"],[51,18,52,20],[51,20,52,22,"context"],[51,27,52,29],[51,28,52,30,"isRestarting"],[51,40,52,42],[52,6,53,8,"restartCount"],[52,18,53,20],[52,20,53,22,"context"],[52,27,53,29],[52,28,53,30,"restartCount"],[52,40,53,42],[53,6,54,8,"availableUpdate"],[53,21,54,23],[54,6,55,8,"downloadedUpdate"],[54,22,55,24],[55,6,56,8,"checkError"],[55,16,56,18],[55,18,56,20,"context"],[55,25,56,27],[55,26,56,28,"checkError"],[55,36,56,38],[56,6,57,8,"downloadError"],[56,19,57,21],[56,21,57,23,"context"],[56,28,57,30],[56,29,57,31,"downloadError"],[56,42,57,44],[57,6,58,8,"lastCheckForUpdateTimeSinceRestart"],[57,40,58,42],[57,42,58,44,"context"],[57,49,58,51],[57,50,58,52,"lastCheckForUpdateTime"],[58,4,59,4],[58,5,59,5],[59,2,60,0],[59,3,60,1],[60,2,60,2,"exports"],[60,9,60,2],[60,10,60,2,"updatesStateFromContext"],[60,33,60,2],[60,36,60,2,"updatesStateFromContext"],[60,59,60,2],[61,0,60,2],[61,3]],"functionMap":{"names":["<global>","updateFromManifest","updateFromRollback","updatesStateFromContext"],"mappings":"AAA;kCCe;CDW;kCEC;EFK;uCGE;CHyB"}},"type":"js/module"}]}