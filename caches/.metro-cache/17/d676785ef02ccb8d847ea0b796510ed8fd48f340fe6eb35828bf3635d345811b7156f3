{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n  // This file draws heavily from https://github.com/phoenixframework/phoenix/commit/cf098e9cf7a44ee6479d31d911a97d3c7430c6fe\n  // License: https://github.com/phoenixframework/phoenix/blob/master/LICENSE.md\n  class Serializer {\n    constructor() {\n      this.HEADER_LENGTH = 1;\n    }\n    decode(rawPayload, callback) {\n      if (rawPayload.constructor === ArrayBuffer) {\n        return callback(this._binaryDecode(rawPayload));\n      }\n      if (typeof rawPayload === 'string') {\n        return callback(JSON.parse(rawPayload));\n      }\n      return callback({});\n    }\n    _binaryDecode(buffer) {\n      const view = new DataView(buffer);\n      const decoder = new TextDecoder();\n      return this._decodeBroadcast(buffer, view, decoder);\n    }\n    _decodeBroadcast(buffer, view, decoder) {\n      const topicSize = view.getUint8(1);\n      const eventSize = view.getUint8(2);\n      let offset = this.HEADER_LENGTH + 2;\n      const topic = decoder.decode(buffer.slice(offset, offset + topicSize));\n      offset = offset + topicSize;\n      const event = decoder.decode(buffer.slice(offset, offset + eventSize));\n      offset = offset + eventSize;\n      const data = JSON.parse(decoder.decode(buffer.slice(offset, buffer.byteLength)));\n      return {\n        ref: null,\n        topic: topic,\n        event: event,\n        payload: data\n      };\n    }\n  }\n  exports.default = Serializer;\n});","lineCount":44,"map":[[6,2,1,0],[7,2,2,0],[8,2,3,15],[8,8,3,21,"Serializer"],[8,18,3,31],[8,19,3,32],[9,4,4,4,"constructor"],[9,15,4,15,"constructor"],[9,16,4,15],[9,18,4,18],[10,6,5,8],[10,10,5,12],[10,11,5,13,"HEADER_LENGTH"],[10,24,5,26],[10,27,5,29],[10,28,5,30],[11,4,6,4],[12,4,7,4,"decode"],[12,10,7,10,"decode"],[12,11,7,11,"rawPayload"],[12,21,7,21],[12,23,7,23,"callback"],[12,31,7,31],[12,33,7,33],[13,6,8,8],[13,10,8,12,"rawPayload"],[13,20,8,22],[13,21,8,23,"constructor"],[13,32,8,34],[13,37,8,39,"ArrayBuffer"],[13,48,8,50],[13,50,8,52],[14,8,9,12],[14,15,9,19,"callback"],[14,23,9,27],[14,24,9,28],[14,28,9,32],[14,29,9,33,"_binaryDecode"],[14,42,9,46],[14,43,9,47,"rawPayload"],[14,53,9,57],[14,54,9,58],[14,55,9,59],[15,6,10,8],[16,6,11,8],[16,10,11,12],[16,17,11,19,"rawPayload"],[16,27,11,29],[16,32,11,34],[16,40,11,42],[16,42,11,44],[17,8,12,12],[17,15,12,19,"callback"],[17,23,12,27],[17,24,12,28,"JSON"],[17,28,12,32],[17,29,12,33,"parse"],[17,34,12,38],[17,35,12,39,"rawPayload"],[17,45,12,49],[17,46,12,50],[17,47,12,51],[18,6,13,8],[19,6,14,8],[19,13,14,15,"callback"],[19,21,14,23],[19,22,14,24],[19,23,14,25],[19,24,14,26],[19,25,14,27],[20,4,15,4],[21,4,16,4,"_binaryDecode"],[21,17,16,17,"_binaryDecode"],[21,18,16,18,"buffer"],[21,24,16,24],[21,26,16,26],[22,6,17,8],[22,12,17,14,"view"],[22,16,17,18],[22,19,17,21],[22,23,17,25,"DataView"],[22,31,17,33],[22,32,17,34,"buffer"],[22,38,17,40],[22,39,17,41],[23,6,18,8],[23,12,18,14,"decoder"],[23,19,18,21],[23,22,18,24],[23,26,18,28,"TextDecoder"],[23,37,18,39],[23,38,18,40],[23,39,18,41],[24,6,19,8],[24,13,19,15],[24,17,19,19],[24,18,19,20,"_decodeBroadcast"],[24,34,19,36],[24,35,19,37,"buffer"],[24,41,19,43],[24,43,19,45,"view"],[24,47,19,49],[24,49,19,51,"decoder"],[24,56,19,58],[24,57,19,59],[25,4,20,4],[26,4,21,4,"_decodeBroadcast"],[26,20,21,20,"_decodeBroadcast"],[26,21,21,21,"buffer"],[26,27,21,27],[26,29,21,29,"view"],[26,33,21,33],[26,35,21,35,"decoder"],[26,42,21,42],[26,44,21,44],[27,6,22,8],[27,12,22,14,"topicSize"],[27,21,22,23],[27,24,22,26,"view"],[27,28,22,30],[27,29,22,31,"getUint8"],[27,37,22,39],[27,38,22,40],[27,39,22,41],[27,40,22,42],[28,6,23,8],[28,12,23,14,"eventSize"],[28,21,23,23],[28,24,23,26,"view"],[28,28,23,30],[28,29,23,31,"getUint8"],[28,37,23,39],[28,38,23,40],[28,39,23,41],[28,40,23,42],[29,6,24,8],[29,10,24,12,"offset"],[29,16,24,18],[29,19,24,21],[29,23,24,25],[29,24,24,26,"HEADER_LENGTH"],[29,37,24,39],[29,40,24,42],[29,41,24,43],[30,6,25,8],[30,12,25,14,"topic"],[30,17,25,19],[30,20,25,22,"decoder"],[30,27,25,29],[30,28,25,30,"decode"],[30,34,25,36],[30,35,25,37,"buffer"],[30,41,25,43],[30,42,25,44,"slice"],[30,47,25,49],[30,48,25,50,"offset"],[30,54,25,56],[30,56,25,58,"offset"],[30,62,25,64],[30,65,25,67,"topicSize"],[30,74,25,76],[30,75,25,77],[30,76,25,78],[31,6,26,8,"offset"],[31,12,26,14],[31,15,26,17,"offset"],[31,21,26,23],[31,24,26,26,"topicSize"],[31,33,26,35],[32,6,27,8],[32,12,27,14,"event"],[32,17,27,19],[32,20,27,22,"decoder"],[32,27,27,29],[32,28,27,30,"decode"],[32,34,27,36],[32,35,27,37,"buffer"],[32,41,27,43],[32,42,27,44,"slice"],[32,47,27,49],[32,48,27,50,"offset"],[32,54,27,56],[32,56,27,58,"offset"],[32,62,27,64],[32,65,27,67,"eventSize"],[32,74,27,76],[32,75,27,77],[32,76,27,78],[33,6,28,8,"offset"],[33,12,28,14],[33,15,28,17,"offset"],[33,21,28,23],[33,24,28,26,"eventSize"],[33,33,28,35],[34,6,29,8],[34,12,29,14,"data"],[34,16,29,18],[34,19,29,21,"JSON"],[34,23,29,25],[34,24,29,26,"parse"],[34,29,29,31],[34,30,29,32,"decoder"],[34,37,29,39],[34,38,29,40,"decode"],[34,44,29,46],[34,45,29,47,"buffer"],[34,51,29,53],[34,52,29,54,"slice"],[34,57,29,59],[34,58,29,60,"offset"],[34,64,29,66],[34,66,29,68,"buffer"],[34,72,29,74],[34,73,29,75,"byteLength"],[34,83,29,85],[34,84,29,86],[34,85,29,87],[34,86,29,88],[35,6,30,8],[35,13,30,15],[36,8,30,17,"ref"],[36,11,30,20],[36,13,30,22],[36,17,30,26],[37,8,30,28,"topic"],[37,13,30,33],[37,15,30,35,"topic"],[37,20,30,40],[38,8,30,42,"event"],[38,13,30,47],[38,15,30,49,"event"],[38,20,30,54],[39,8,30,56,"payload"],[39,15,30,63],[39,17,30,65,"data"],[40,6,30,70],[40,7,30,71],[41,4,31,4],[42,2,32,0],[43,2,32,1,"exports"],[43,9,32,1],[43,10,32,1,"default"],[43,17,32,1],[43,20,32,1,"Serializer"],[43,30,32,1],[44,0,32,1],[44,3]],"functionMap":{"names":["<global>","Serializer","Serializer#constructor","Serializer#decode","Serializer#_binaryDecode","Serializer#_decodeBroadcast"],"mappings":"AAA;eCE;ICC;KDE;IEC;KFQ;IGC;KHI;IIC;KJU;CDC"}},"type":"js/module"}]}