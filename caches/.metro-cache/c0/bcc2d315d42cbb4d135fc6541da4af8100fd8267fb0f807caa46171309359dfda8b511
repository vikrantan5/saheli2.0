{"dependencies":[{"name":"tslib","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":34,"index":34}}],"key":"8R25577gwLd3n1hFG9VYnRLV9eE=","exportNames":["*"]}},{"name":"../lib/errors","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":35},"end":{"line":2,"column":47,"index":82}}],"key":"tudpaQjH3OjVUtpmjZhVLT9U2eg=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n  var _tslib = require(_dependencyMap[0], \"tslib\");\n  var _errors = require(_dependencyMap[1], \"../lib/errors\");\n  class StreamDownloadBuilder {\n    constructor(downloadFn, shouldThrowOnError) {\n      this.downloadFn = downloadFn;\n      this.shouldThrowOnError = shouldThrowOnError;\n    }\n    then(onfulfilled, onrejected) {\n      return this.execute().then(onfulfilled, onrejected);\n    }\n    execute() {\n      return (0, _tslib.__awaiter)(this, void 0, void 0, function* () {\n        try {\n          const result = yield this.downloadFn();\n          return {\n            data: result.body,\n            error: null\n          };\n        } catch (error) {\n          if (this.shouldThrowOnError) {\n            throw error;\n          }\n          if ((0, _errors.isStorageError)(error)) {\n            return {\n              data: null,\n              error\n            };\n          }\n          throw error;\n        }\n      });\n    }\n  }\n  exports.default = StreamDownloadBuilder;\n});","lineCount":40,"map":[[6,2,1,0],[6,6,1,0,"_tslib"],[6,12,1,0],[6,15,1,0,"require"],[6,22,1,0],[6,23,1,0,"_dependencyMap"],[6,37,1,0],[7,2,2,0],[7,6,2,0,"_errors"],[7,13,2,0],[7,16,2,0,"require"],[7,23,2,0],[7,24,2,0,"_dependencyMap"],[7,38,2,0],[8,2,3,15],[8,8,3,21,"StreamDownloadBuilder"],[8,29,3,42],[8,30,3,43],[9,4,4,4,"constructor"],[9,15,4,15,"constructor"],[9,16,4,16,"downloadFn"],[9,26,4,26],[9,28,4,28,"shouldThrowOnError"],[9,46,4,46],[9,48,4,48],[10,6,5,8],[10,10,5,12],[10,11,5,13,"downloadFn"],[10,21,5,23],[10,24,5,26,"downloadFn"],[10,34,5,36],[11,6,6,8],[11,10,6,12],[11,11,6,13,"shouldThrowOnError"],[11,29,6,31],[11,32,6,34,"shouldThrowOnError"],[11,50,6,52],[12,4,7,4],[13,4,8,4,"then"],[13,8,8,8,"then"],[13,9,8,9,"onfulfilled"],[13,20,8,20],[13,22,8,22,"onrejected"],[13,32,8,32],[13,34,8,34],[14,6,9,8],[14,13,9,15],[14,17,9,19],[14,18,9,20,"execute"],[14,25,9,27],[14,26,9,28],[14,27,9,29],[14,28,9,30,"then"],[14,32,9,34],[14,33,9,35,"onfulfilled"],[14,44,9,46],[14,46,9,48,"onrejected"],[14,56,9,58],[14,57,9,59],[15,4,10,4],[16,4,11,4,"execute"],[16,11,11,11,"execute"],[16,12,11,11],[16,14,11,14],[17,6,12,8],[17,13,12,15],[17,17,12,15,"__awaiter"],[17,33,12,24],[17,35,12,25],[17,39,12,29],[17,41,12,31],[17,46,12,36],[17,47,12,37],[17,49,12,39],[17,54,12,44],[17,55,12,45],[17,57,12,47],[17,70,12,60],[18,8,13,12],[18,12,13,16],[19,10,14,16],[19,16,14,22,"result"],[19,22,14,28],[19,25,14,31],[19,31,14,37],[19,35,14,41],[19,36,14,42,"downloadFn"],[19,46,14,52],[19,47,14,53],[19,48,14,54],[20,10,15,16],[20,17,15,23],[21,12,16,20,"data"],[21,16,16,24],[21,18,16,26,"result"],[21,24,16,32],[21,25,16,33,"body"],[21,29,16,37],[22,12,17,20,"error"],[22,17,17,25],[22,19,17,27],[23,10,18,16],[23,11,18,17],[24,8,19,12],[24,9,19,13],[24,10,20,12],[24,17,20,19,"error"],[24,22,20,24],[24,24,20,26],[25,10,21,16],[25,14,21,20],[25,18,21,24],[25,19,21,25,"shouldThrowOnError"],[25,37,21,43],[25,39,21,45],[26,12,22,20],[26,18,22,26,"error"],[26,23,22,31],[27,10,23,16],[28,10,24,16],[28,14,24,20],[28,18,24,20,"isStorageError"],[28,40,24,34],[28,42,24,35,"error"],[28,47,24,40],[28,48,24,41],[28,50,24,43],[29,12,25,20],[29,19,25,27],[30,14,25,29,"data"],[30,18,25,33],[30,20,25,35],[30,24,25,39],[31,14,25,41,"error"],[32,12,25,47],[32,13,25,48],[33,10,26,16],[34,10,27,16],[34,16,27,22,"error"],[34,21,27,27],[35,8,28,12],[36,6,29,8],[36,7,29,9],[36,8,29,10],[37,4,30,4],[38,2,31,0],[39,2,31,1,"exports"],[39,9,31,1],[39,10,31,1,"default"],[39,17,31,1],[39,20,31,1,"StreamDownloadBuilder"],[39,41,31,1],[40,0,31,1],[40,3]],"functionMap":{"names":["<global>","StreamDownloadBuilder","constructor","then","execute","__awaiter$argument_3"],"mappings":"AAA;eCE;ICC;KDG;IEC;KFE;IGC;+CCC;SDiB;KHC;CDC"}},"type":"js/module"}]}