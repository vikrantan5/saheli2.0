{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"]}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"]}},{"name":"tslib","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":16,"index":101},"end":{"line":4,"column":32,"index":117}}],"key":"vm88vOsSPZItrLOmMEyUuGkd1y4=","exportNames":["*"]}},{"name":"../lib/errors","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":17,"index":136},"end":{"line":5,"column":41,"index":160}}],"key":"+GSAvg/CWfG2ifOQrWLkai/D9hY=","exportNames":["*"]}},{"name":"./StreamDownloadBuilder","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":56,"index":218},"end":{"line":6,"column":90,"index":252}}],"key":"J2qh5zRhKrS/71C3urjbsL+bmGQ=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _classCallCheck = require(_dependencyMap[0], \"@babel/runtime/helpers/classCallCheck\");\n  var _createClass = require(_dependencyMap[1], \"@babel/runtime/helpers/createClass\");\n  var _a;\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  var tslib_1 = require(_dependencyMap[2], \"tslib\");\n  var errors_1 = require(_dependencyMap[3], \"../lib/errors\");\n  var StreamDownloadBuilder_1 = tslib_1.__importDefault(require(_dependencyMap[4], \"./StreamDownloadBuilder\"));\n  var BlobDownloadBuilder = /*#__PURE__*/function () {\n    function BlobDownloadBuilder(downloadFn, shouldThrowOnError) {\n      _classCallCheck(this, BlobDownloadBuilder);\n      this.downloadFn = downloadFn;\n      this.shouldThrowOnError = shouldThrowOnError;\n      this[_a] = 'BlobDownloadBuilder';\n      this.promise = null;\n    }\n    return _createClass(BlobDownloadBuilder, [{\n      key: \"asStream\",\n      value: function asStream() {\n        return new StreamDownloadBuilder_1.default(this.downloadFn, this.shouldThrowOnError);\n      }\n    }, {\n      key: \"then\",\n      value: function then(onfulfilled, onrejected) {\n        return this.getPromise().then(onfulfilled, onrejected);\n      }\n    }, {\n      key: \"catch\",\n      value: function _catch(onrejected) {\n        return this.getPromise().catch(onrejected);\n      }\n    }, {\n      key: \"finally\",\n      value: function _finally(onfinally) {\n        return this.getPromise().finally(onfinally);\n      }\n    }, {\n      key: \"getPromise\",\n      value: function getPromise() {\n        if (!this.promise) {\n          this.promise = this.execute();\n        }\n        return this.promise;\n      }\n    }, {\n      key: \"execute\",\n      value: function execute() {\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\n          try {\n            var result = yield this.downloadFn();\n            return {\n              data: yield result.blob(),\n              error: null\n            };\n          } catch (error) {\n            if (this.shouldThrowOnError) {\n              throw error;\n            }\n            if ((0, errors_1.isStorageError)(error)) {\n              return {\n                data: null,\n                error\n              };\n            }\n            throw error;\n          }\n        });\n      }\n    }]);\n  }();\n  _a = Symbol.toStringTag;\n  exports.default = BlobDownloadBuilder;\n});","lineCount":77,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13],[4,6,1,13,"_classCallCheck"],[4,21,1,13],[4,24,1,13,"require"],[4,31,1,13],[4,32,1,13,"_dependencyMap"],[4,46,1,13],[5,2,1,13],[5,6,1,13,"_createClass"],[5,18,1,13],[5,21,1,13,"require"],[5,28,1,13],[5,29,1,13,"_dependencyMap"],[5,43,1,13],[6,2,2,0],[6,6,2,4,"_a"],[6,8,2,6],[7,2,3,0,"Object"],[7,8,3,6],[7,9,3,7,"defineProperty"],[7,23,3,21],[7,24,3,22,"exports"],[7,31,3,29],[7,33,3,31],[7,45,3,43],[7,47,3,45],[8,4,3,47,"value"],[8,9,3,52],[8,11,3,54],[9,2,3,59],[9,3,3,60],[9,4,3,61],[10,2,4,0],[10,6,4,6,"tslib_1"],[10,13,4,13],[10,16,4,16,"require"],[10,23,4,23],[10,24,4,23,"_dependencyMap"],[10,38,4,23],[10,50,4,31],[10,51,4,32],[11,2,5,0],[11,6,5,6,"errors_1"],[11,14,5,14],[11,17,5,17,"require"],[11,24,5,24],[11,25,5,24,"_dependencyMap"],[11,39,5,24],[11,59,5,40],[11,60,5,41],[12,2,6,0],[12,6,6,6,"StreamDownloadBuilder_1"],[12,29,6,29],[12,32,6,32,"tslib_1"],[12,39,6,39],[12,40,6,40,"__importDefault"],[12,55,6,55],[12,56,6,56,"require"],[12,63,6,63],[12,64,6,63,"_dependencyMap"],[12,78,6,63],[12,108,6,89],[12,109,6,90],[12,110,6,91],[13,2,6,92],[13,6,7,6,"BlobDownloadBuilder"],[13,25,7,25],[14,4,8,4],[14,13,8,4,"BlobDownloadBuilder"],[14,33,8,16,"downloadFn"],[14,43,8,26],[14,45,8,28,"shouldThrowOnError"],[14,63,8,46],[14,65,8,48],[15,6,8,48,"_classCallCheck"],[15,21,8,48],[15,28,8,48,"BlobDownloadBuilder"],[15,47,8,48],[16,6,9,8],[16,10,9,12],[16,11,9,13,"downloadFn"],[16,21,9,23],[16,24,9,26,"downloadFn"],[16,34,9,36],[17,6,10,8],[17,10,10,12],[17,11,10,13,"shouldThrowOnError"],[17,29,10,31],[17,32,10,34,"shouldThrowOnError"],[17,50,10,52],[18,6,11,8],[18,10,11,12],[18,11,11,13,"_a"],[18,13,11,15],[18,14,11,16],[18,17,11,19],[18,38,11,40],[19,6,12,8],[19,10,12,12],[19,11,12,13,"promise"],[19,18,12,20],[19,21,12,23],[19,25,12,27],[20,4,13,4],[21,4,13,5],[21,11,13,5,"_createClass"],[21,23,13,5],[21,24,13,5,"BlobDownloadBuilder"],[21,43,13,5],[22,6,13,5,"key"],[22,9,13,5],[23,6,13,5,"value"],[23,11,13,5],[23,13,14,4],[23,22,14,4,"asStream"],[23,30,14,12,"asStream"],[23,31,14,12],[23,33,14,15],[24,8,15,8],[24,15,15,15],[24,19,15,19,"StreamDownloadBuilder_1"],[24,42,15,42],[24,43,15,43,"default"],[24,50,15,50],[24,51,15,51],[24,55,15,55],[24,56,15,56,"downloadFn"],[24,66,15,66],[24,68,15,68],[24,72,15,72],[24,73,15,73,"shouldThrowOnError"],[24,91,15,91],[24,92,15,92],[25,6,16,4],[26,4,16,5],[27,6,16,5,"key"],[27,9,16,5],[28,6,16,5,"value"],[28,11,16,5],[28,13,17,4],[28,22,17,4,"then"],[28,26,17,8,"then"],[28,27,17,9,"onfulfilled"],[28,38,17,20],[28,40,17,22,"onrejected"],[28,50,17,32],[28,52,17,34],[29,8,18,8],[29,15,18,15],[29,19,18,19],[29,20,18,20,"getPromise"],[29,30,18,30],[29,31,18,31],[29,32,18,32],[29,33,18,33,"then"],[29,37,18,37],[29,38,18,38,"onfulfilled"],[29,49,18,49],[29,51,18,51,"onrejected"],[29,61,18,61],[29,62,18,62],[30,6,19,4],[31,4,19,5],[32,6,19,5,"key"],[32,9,19,5],[33,6,19,5,"value"],[33,11,19,5],[33,13,20,4],[33,22,20,4,"catch"],[33,28,20,9,"catch"],[33,29,20,10,"onrejected"],[33,39,20,20],[33,41,20,22],[34,8,21,8],[34,15,21,15],[34,19,21,19],[34,20,21,20,"getPromise"],[34,30,21,30],[34,31,21,31],[34,32,21,32],[34,33,21,33,"catch"],[34,38,21,38],[34,39,21,39,"onrejected"],[34,49,21,49],[34,50,21,50],[35,6,22,4],[36,4,22,5],[37,6,22,5,"key"],[37,9,22,5],[38,6,22,5,"value"],[38,11,22,5],[38,13,23,4],[38,22,23,4,"finally"],[38,30,23,11,"finally"],[38,31,23,12,"onfinally"],[38,40,23,21],[38,42,23,23],[39,8,24,8],[39,15,24,15],[39,19,24,19],[39,20,24,20,"getPromise"],[39,30,24,30],[39,31,24,31],[39,32,24,32],[39,33,24,33,"finally"],[39,40,24,40],[39,41,24,41,"onfinally"],[39,50,24,50],[39,51,24,51],[40,6,25,4],[41,4,25,5],[42,6,25,5,"key"],[42,9,25,5],[43,6,25,5,"value"],[43,11,25,5],[43,13,26,4],[43,22,26,4,"getPromise"],[43,32,26,14,"getPromise"],[43,33,26,14],[43,35,26,17],[44,8,27,8],[44,12,27,12],[44,13,27,13],[44,17,27,17],[44,18,27,18,"promise"],[44,25,27,25],[44,27,27,27],[45,10,28,12],[45,14,28,16],[45,15,28,17,"promise"],[45,22,28,24],[45,25,28,27],[45,29,28,31],[45,30,28,32,"execute"],[45,37,28,39],[45,38,28,40],[45,39,28,41],[46,8,29,8],[47,8,30,8],[47,15,30,15],[47,19,30,19],[47,20,30,20,"promise"],[47,27,30,27],[48,6,31,4],[49,4,31,5],[50,6,31,5,"key"],[50,9,31,5],[51,6,31,5,"value"],[51,11,31,5],[51,13,32,4],[51,22,32,4,"execute"],[51,29,32,11,"execute"],[51,30,32,11],[51,32,32,14],[52,8,33,8],[52,15,33,15,"tslib_1"],[52,22,33,22],[52,23,33,23,"__awaiter"],[52,32,33,32],[52,33,33,33],[52,37,33,37],[52,39,33,39],[52,44,33,44],[52,45,33,45],[52,47,33,47],[52,52,33,52],[52,53,33,53],[52,55,33,55],[52,68,33,68],[53,10,34,12],[53,14,34,16],[54,12,35,16],[54,16,35,22,"result"],[54,22,35,28],[54,25,35,31],[54,31,35,37],[54,35,35,41],[54,36,35,42,"downloadFn"],[54,46,35,52],[54,47,35,53],[54,48,35,54],[55,12,36,16],[55,19,36,23],[56,14,37,20,"data"],[56,18,37,24],[56,20,37,26],[56,26,37,32,"result"],[56,32,37,38],[56,33,37,39,"blob"],[56,37,37,43],[56,38,37,44],[56,39,37,45],[57,14,38,20,"error"],[57,19,38,25],[57,21,38,27],[58,12,39,16],[58,13,39,17],[59,10,40,12],[59,11,40,13],[59,12,41,12],[59,19,41,19,"error"],[59,24,41,24],[59,26,41,26],[60,12,42,16],[60,16,42,20],[60,20,42,24],[60,21,42,25,"shouldThrowOnError"],[60,39,42,43],[60,41,42,45],[61,14,43,20],[61,20,43,26,"error"],[61,25,43,31],[62,12,44,16],[63,12,45,16],[63,16,45,20],[63,17,45,21],[63,18,45,22],[63,20,45,24,"errors_1"],[63,28,45,32],[63,29,45,33,"isStorageError"],[63,43,45,47],[63,45,45,49,"error"],[63,50,45,54],[63,51,45,55],[63,53,45,57],[64,14,46,20],[64,21,46,27],[65,16,46,29,"data"],[65,20,46,33],[65,22,46,35],[65,26,46,39],[66,16,46,41,"error"],[67,14,46,47],[67,15,46,48],[68,12,47,16],[69,12,48,16],[69,18,48,22,"error"],[69,23,48,27],[70,10,49,12],[71,8,50,8],[71,9,50,9],[71,10,50,10],[72,6,51,4],[73,4,51,5],[74,2,51,5],[75,2,53,0,"_a"],[75,4,53,2],[75,7,53,5,"Symbol"],[75,13,53,11],[75,14,53,12,"toStringTag"],[75,25,53,23],[76,2,54,0,"exports"],[76,9,54,7],[76,10,54,8,"default"],[76,17,54,15],[76,20,54,18,"BlobDownloadBuilder"],[76,39,54,37],[77,0,54,38],[77,3]],"functionMap":{"names":["<global>","BlobDownloadBuilder","constructor","asStream","then","_catch","_finally","getPromise","execute","tslib_1.__awaiter$argument_3"],"mappings":"AAA;ACM;ICC;KDK;IEC;KFE;IGC;KHE;IIC;KJE;IKC;KLE;IMC;KNK;IOC;uDCC;SDiB;KPC;CDC"}},"type":"js/module"}]}