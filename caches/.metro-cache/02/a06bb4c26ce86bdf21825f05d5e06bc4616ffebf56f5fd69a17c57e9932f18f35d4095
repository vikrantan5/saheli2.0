{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"]}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"]}},{"name":"@babel/runtime/helpers/classPrivateFieldLooseBase","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"jktBven9cFmiXr10q2uuMiBaNBg=","exportNames":["*"]}},{"name":"@babel/runtime/helpers/classPrivateFieldLooseKey","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YYsVumDWjUPySlBONhl8so2wff4=","exportNames":["*"]}},{"name":"./utils.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":20},"end":{"line":2,"column":54,"index":74}}],"key":"NIaSEHO1E48gsZc7jH9Ex1xTHgE=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.Removable = void 0;\n  var _classCallCheck2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\"));\n  var _createClass2 = _interopRequireDefault(require(_dependencyMap[2], \"@babel/runtime/helpers/createClass\"));\n  var _classPrivateFieldLooseBase2 = _interopRequireDefault(require(_dependencyMap[3], \"@babel/runtime/helpers/classPrivateFieldLooseBase\"));\n  var _classPrivateFieldLooseKey2 = _interopRequireDefault(require(_dependencyMap[4], \"@babel/runtime/helpers/classPrivateFieldLooseKey\"));\n  var _utils = require(_dependencyMap[5], \"./utils.js\");\n  var _gcTimeout; // src/removable.ts\n  var Removable = exports.Removable = (_gcTimeout = /*#__PURE__*/(0, _classPrivateFieldLooseKey2.default)(\"gcTimeout\"), /*#__PURE__*/function () {\n    function Removable() {\n      (0, _classCallCheck2.default)(this, Removable);\n      Object.defineProperty(this, _gcTimeout, {\n        writable: true,\n        value: void 0\n      });\n    }\n    return (0, _createClass2.default)(Removable, [{\n      key: \"destroy\",\n      value: function destroy() {\n        this.clearGcTimeout();\n      }\n    }, {\n      key: \"scheduleGc\",\n      value: function scheduleGc() {\n        this.clearGcTimeout();\n        if ((0, _utils.isValidTimeout)(this.gcTime)) {\n          (0, _classPrivateFieldLooseBase2.default)(this, _gcTimeout)[_gcTimeout] = setTimeout(() => {\n            this.optionalRemove();\n          }, this.gcTime);\n        }\n      }\n    }, {\n      key: \"updateGcTime\",\n      value: function updateGcTime(newGcTime) {\n        this.gcTime = Math.max(this.gcTime || 0, newGcTime ?? (_utils.isServer ? Infinity : 5 * 60 * 1e3));\n      }\n    }, {\n      key: \"clearGcTimeout\",\n      value: function clearGcTimeout() {\n        if ((0, _classPrivateFieldLooseBase2.default)(this, _gcTimeout)[_gcTimeout]) {\n          clearTimeout((0, _classPrivateFieldLooseBase2.default)(this, _gcTimeout)[_gcTimeout]);\n          (0, _classPrivateFieldLooseBase2.default)(this, _gcTimeout)[_gcTimeout] = void 0;\n        }\n      }\n    }]);\n  }());\n});","lineCount":51,"map":[[11,2,2,0],[11,6,2,0,"_utils"],[11,12,2,0],[11,15,2,0,"require"],[11,22,2,0],[11,23,2,0,"_dependencyMap"],[11,37,2,0],[12,2,2,54],[12,6,2,54,"_gcTimeout"],[12,16,2,54],[12,18,1,0],[13,2,3,0],[13,6,3,4,"Removable"],[13,15,3,13],[13,18,3,13,"exports"],[13,25,3,13],[13,26,3,13,"Removable"],[13,35,3,13],[13,39,3,13,"_gcTimeout"],[13,49,3,13],[13,69,3,13,"_classPrivateFieldLooseKey2"],[13,96,3,13],[13,97,3,13,"default"],[13,104,3,13],[14,4,3,13],[14,13,3,13,"Removable"],[14,23,3,13],[15,6,3,13],[15,10,3,13,"_classCallCheck2"],[15,26,3,13],[15,27,3,13,"default"],[15,34,3,13],[15,42,3,13,"Removable"],[15,51,3,13],[16,6,3,13,"Object"],[16,12,3,13],[16,13,3,13,"defineProperty"],[16,27,3,13],[16,34,3,13,"_gcTimeout"],[16,44,3,13],[17,8,3,13,"writable"],[17,16,3,13],[18,8,3,13,"value"],[18,13,3,13],[19,6,3,13],[20,4,3,13],[21,4,3,13],[21,15,3,13,"_createClass2"],[21,28,3,13],[21,29,3,13,"default"],[21,36,3,13],[21,38,3,13,"Removable"],[21,47,3,13],[22,6,3,13,"key"],[22,9,3,13],[23,6,3,13,"value"],[23,11,3,13],[23,13,5,2],[23,22,5,2,"destroy"],[23,29,5,9,"destroy"],[23,30,5,9],[23,32,5,12],[24,8,6,4],[24,12,6,8],[24,13,6,9,"clearGcTimeout"],[24,27,6,23],[24,28,6,24],[24,29,6,25],[25,6,7,2],[26,4,7,3],[27,6,7,3,"key"],[27,9,7,3],[28,6,7,3,"value"],[28,11,7,3],[28,13,8,2],[28,22,8,2,"scheduleGc"],[28,32,8,12,"scheduleGc"],[28,33,8,12],[28,35,8,15],[29,8,9,4],[29,12,9,8],[29,13,9,9,"clearGcTimeout"],[29,27,9,23],[29,28,9,24],[29,29,9,25],[30,8,10,4],[30,12,10,8],[30,16,10,8,"isValidTimeout"],[30,37,10,22],[30,39,10,23],[30,43,10,27],[30,44,10,28,"gcTime"],[30,50,10,34],[30,51,10,35],[30,53,10,37],[31,10,11,6],[31,14,11,6,"_classPrivateFieldLooseBase2"],[31,42,11,6],[31,43,11,6,"default"],[31,50,11,6],[31,56,11,10],[31,58,11,10,"_gcTimeout"],[31,68,11,10],[31,70,11,10,"_gcTimeout"],[31,80,11,10],[31,84,11,24,"setTimeout"],[31,94,11,34],[31,95,11,35],[31,101,11,41],[32,12,12,8],[32,16,12,12],[32,17,12,13,"optionalRemove"],[32,31,12,27],[32,32,12,28],[32,33,12,29],[33,10,13,6],[33,11,13,7],[33,13,13,9],[33,17,13,13],[33,18,13,14,"gcTime"],[33,24,13,20],[33,25,13,21],[34,8,14,4],[35,6,15,2],[36,4,15,3],[37,6,15,3,"key"],[37,9,15,3],[38,6,15,3,"value"],[38,11,15,3],[38,13,16,2],[38,22,16,2,"updateGcTime"],[38,34,16,14,"updateGcTime"],[38,35,16,15,"newGcTime"],[38,44,16,24],[38,46,16,26],[39,8,17,4],[39,12,17,8],[39,13,17,9,"gcTime"],[39,19,17,15],[39,22,17,18,"Math"],[39,26,17,22],[39,27,17,23,"max"],[39,30,17,26],[39,31,18,6],[39,35,18,10],[39,36,18,11,"gcTime"],[39,42,18,17],[39,46,18,21],[39,47,18,22],[39,49,19,6,"newGcTime"],[39,58,19,15],[39,63,19,20,"isServer"],[39,78,19,28],[39,81,19,31,"Infinity"],[39,89,19,39],[39,92,19,42],[39,93,19,43],[39,96,19,46],[39,98,19,48],[39,101,19,51],[39,104,19,54],[39,105,20,4],[39,106,20,5],[40,6,21,2],[41,4,21,3],[42,6,21,3,"key"],[42,9,21,3],[43,6,21,3,"value"],[43,11,21,3],[43,13,22,2],[43,22,22,2,"clearGcTimeout"],[43,36,22,16,"clearGcTimeout"],[43,37,22,16],[43,39,22,19],[44,8,23,4],[44,16,23,4,"_classPrivateFieldLooseBase2"],[44,44,23,4],[44,45,23,4,"default"],[44,52,23,4],[44,54,23,8],[44,58,23,12],[44,60,23,12,"_gcTimeout"],[44,70,23,12],[44,72,23,12,"_gcTimeout"],[44,82,23,12],[44,85,23,25],[45,10,24,6,"clearTimeout"],[45,22,24,18],[45,27,24,18,"_classPrivateFieldLooseBase2"],[45,55,24,18],[45,56,24,18,"default"],[45,63,24,18],[45,65,24,19],[45,69,24,23],[45,71,24,23,"_gcTimeout"],[45,81,24,23],[45,83,24,23,"_gcTimeout"],[45,93,24,23],[45,94,24,34],[45,95,24,35],[46,10,25,6],[46,14,25,6,"_classPrivateFieldLooseBase2"],[46,42,25,6],[46,43,25,6,"default"],[46,50,25,6],[46,56,25,10],[46,58,25,10,"_gcTimeout"],[46,68,25,10],[46,70,25,10,"_gcTimeout"],[46,80,25,10],[46,84,25,24],[46,89,25,29],[46,90,25,30],[47,8,26,4],[48,6,27,2],[49,4,27,3],[50,2,27,3],[50,6,28,1],[51,0,28,2],[51,3]],"functionMap":{"names":["<global>","Removable","Removable#destroy","Removable#scheduleGc","setTimeout$argument_0","Removable#updateGcTime","Removable#clearGcTimeout"],"mappings":"AAA;gBCE;ECE;GDE;EEC;mCCG;ODE;GFE;EIC;GJK;EKC;GLK;CDC"}},"type":"js/module"}]}